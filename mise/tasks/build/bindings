#!/usr/bin/env bash

#MISE description="Build Rust bindings library and update Go cache-buster"
#MISE depends=["build:rocksdb"]

cargo build -p bindings

# Write a Go source file holding the bindings hash to ./go/bindings/cache_bust.go
cat <<EOF > ./go/bindings/cache_bust.go
package bindings
var BuildTime = "$(stat -c %Y ${CARGO_TARGET_DIR}/debug/libbindings.a)"
EOF