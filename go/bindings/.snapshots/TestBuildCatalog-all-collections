([]*flow.CollectionSpec) (len=6) {
  (*flow.CollectionSpec)(collection:"a/collection" schema_uri:"file:///build.flow.yaml?ptr=/collections/a~1collection/schema" schema_json:"{\"$id\":\"file:///build.flow.yaml?ptr=/collections/a~1collection/schema\",\"properties\":{\"a_key\":{\"type\":\"string\"},\"a_val\":{\"type\":\"integer\"}},\"required\":[\"a_key\"],\"type\":\"object\"}" key_ptrs:"/a_key" uuid_ptr:"/_meta/uuid" projections:<ptr:"/a_key" field:"a_key" is_primary_key:true inference:<types:"string" string:<> exists:MUST > > projections:<ptr:"/a_val" field:"a_val" inference:<types:"integer" exists:MAY > > projections:<field:"flow_document" explicit:true inference:<types:"object" exists:MUST > > ack_json_template:"{\"_meta\":{\"ack\":true,\"uuid\":\"DocUUIDPlaceholder-329Bb50aa48EAa9ef\"}}" partition_template:<name:"a/collection" replication:3 labels:<labels:<name:"app.gazette.dev/managed-by" value:"estuary.dev/flow" > labels:<name:"content-type" value:"application/x-ndjson" > labels:<name:"estuary.dev/build" value:"fixture" > labels:<name:"estuary.dev/collection" value:"a/collection" > > fragment:<length:536870912 compression_codec:GZIP stores:"s3://a-bucket/" refresh_interval:<seconds:300 > path_postfix_template:"utc_date={{.Spool.FirstAppendTime.Format \"2006-01-02\"}}/utc_hour={{.Spool.FirstAppendTime.Format \"15\"}}" > flags:4 max_append_rate:4194304 > ),
  (*flow.CollectionSpec)(collection:"a/derivation" schema_uri:"file:///build.flow.yaml?ptr=/collections/a~1derivation/schema" schema_json:"{\"$id\":\"file:///build.flow.yaml?ptr=/collections/a~1derivation/schema\",\"properties\":{\"a_key\":{\"type\":\"string\"}},\"required\":[\"a_key\"],\"type\":\"object\"}" key_ptrs:"/a_key" uuid_ptr:"/_meta/uuid" projections:<ptr:"/a_key" field:"a_key" is_primary_key:true inference:<types:"string" string:<> exists:MUST > > projections:<field:"flow_document" explicit:true inference:<types:"object" exists:MUST > > ack_json_template:"{\"_meta\":{\"ack\":true,\"uuid\":\"DocUUIDPlaceholder-329Bb50aa48EAa9ef\"}}" partition_template:<name:"a/derivation" replication:3 labels:<labels:<name:"app.gazette.dev/managed-by" value:"estuary.dev/flow" > labels:<name:"content-type" value:"application/x-ndjson" > labels:<name:"estuary.dev/build" value:"fixture" > labels:<name:"estuary.dev/collection" value:"a/derivation" > > fragment:<length:536870912 compression_codec:GZIP stores:"s3://a-bucket/" refresh_interval:<seconds:300 > path_postfix_template:"utc_date={{.Spool.FirstAppendTime.Format \"2006-01-02\"}}/utc_hour={{.Spool.FirstAppendTime.Format \"15\"}}" > flags:4 max_append_rate:4194304 > ),
  (*flow.CollectionSpec)(collection:"ops/a/logs" schema_uri:"builtin://flow/ops-log-schema.json" schema_json:"{\"$defs\":{\"__flowInline1\":{\"$id\":\"builtin://flow/ops-shard-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Identifies a specific shard of a task, which may be the source of a log message or metrics\",\"properties\":{\"keyBegin\":{\"description\":\"The inclusive beginning of the shard's assigned key range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"},\"kind\":{\"description\":\"The type of the catalog task\",\"enum\":[\"capture\",\"derivation\",\"materialization\"]},\"name\":{\"description\":\"The name of the catalog task (without the task type prefix)\",\"type\":\"string\"},\"rClockBegin\":{\"description\":\"The inclusive beginning of the shard's assigned rClock range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"}},\"required\":[\"kind\",\"name\",\"keyBegin\",\"rClockBegin\"],\"title\":\"Flow shard id\",\"type\":\"object\"}},\"$id\":\"builtin://flow/ops-log-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Logs related to the processing of a Flow capture, derivation, or materialization\",\"properties\":{\"fields\":{\"additionalProperties\":true,\"description\":\"Map of keys and values that are associated with this log entry.\",\"type\":\"object\"},\"level\":{\"enum\":[\"debug\",\"info\",\"warn\",\"error\"]},\"message\":{\"type\":\"string\"},\"shard\":{\"$ref\":\"ops-shard-schema.json\"},\"ts\":{\"description\":\"Timestamp corresponding to the start of the transaction\",\"format\":\"date-time\",\"type\":\"string\"}},\"required\":[\"shard\",\"ts\",\"level\",\"message\"],\"title\":\"Flow task logs\",\"type\":\"object\"}" key_ptrs:"/shard/name" key_ptrs:"/shard/keyBegin" key_ptrs:"/shard/rClockBegin" key_ptrs:"/ts" uuid_ptr:"/_meta/uuid" partition_fields:"kind" partition_fields:"name" projections:<ptr:"/fields" field:"fields" inference:<types:"object" description:"Map of keys and values that are associated with this log entry." exists:MAY > > projections:<field:"flow_document" explicit:true inference:<types:"object" title:"Flow task logs" description:"Logs related to the processing of a Flow capture, derivation, or materialization" exists:MUST > > projections:<ptr:"/shard/kind" field:"kind" explicit:true is_partition_key:true inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/level" field:"level" inference:<types:"string" string:<> exists:MUST > > projections:<ptr:"/message" field:"message" inference:<types:"string" string:<> exists:MUST > > projections:<ptr:"/shard/name" field:"name" explicit:true is_partition_key:true is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/shard" field:"shard" inference:<types:"object" title:"Flow shard id" description:"Identifies a specific shard of a task, which may be the source of a log message or metrics" exists:MUST > > projections:<ptr:"/shard/keyBegin" field:"shard/keyBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned key range" exists:MUST > > projections:<ptr:"/shard/kind" field:"shard/kind" inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/shard/name" field:"shard/name" is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/shard/rClockBegin" field:"shard/rClockBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned rClock range" exists:MUST > > projections:<ptr:"/ts" field:"ts" is_primary_key:true inference:<types:"string" string:<format:"date-time" > description:"Timestamp corresponding to the start of the transaction" exists:MUST > > ack_json_template:"{\"_meta\":{\"ack\":true,\"uuid\":\"DocUUIDPlaceholder-329Bb50aa48EAa9ef\"}}" partition_template:<name:"ops/a/logs" replication:3 labels:<labels:<name:"app.gazette.dev/managed-by" value:"estuary.dev/flow" > labels:<name:"content-type" value:"application/x-ndjson" > labels:<name:"estuary.dev/build" value:"fixture" > labels:<name:"estuary.dev/collection" value:"ops/a/logs" > > fragment:<length:536870912 compression_codec:GZIP stores:"s3://a-bucket/" refresh_interval:<seconds:300 > path_postfix_template:"utc_date={{.Spool.FirstAppendTime.Format \"2006-01-02\"}}/utc_hour={{.Spool.FirstAppendTime.Format \"15\"}}" > flags:4 max_append_rate:4194304 > ),
  (*flow.CollectionSpec)(collection:"ops/a/stats" schema_uri:"builtin://flow/ops-stats-schema.json" schema_json:"{\"$defs\":{\"__flowInline1\":{\"$id\":\"builtin://flow/ops-shard-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Identifies a specific shard of a task, which may be the source of a log message or metrics\",\"properties\":{\"keyBegin\":{\"description\":\"The inclusive beginning of the shard's assigned key range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"},\"kind\":{\"description\":\"The type of the catalog task\",\"enum\":[\"capture\",\"derivation\",\"materialization\"]},\"name\":{\"description\":\"The name of the catalog task (without the task type prefix)\",\"type\":\"string\"},\"rClockBegin\":{\"description\":\"The inclusive beginning of the shard's assigned rClock range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"}},\"required\":[\"kind\",\"name\",\"keyBegin\",\"rClockBegin\"],\"title\":\"Flow shard id\",\"type\":\"object\"},\"docsAndBytes\":{\"properties\":{\"bytesTotal\":{\"description\":\"Total number of bytes representing the JSON encoded documents\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"},\"docsTotal\":{\"description\":\"Total number of documents\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"docsTotal\",\"bytesTotal\"],\"type\":\"object\"},\"invokeStats\":{\"properties\":{\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"secondsTotal\":{\"type\":\"number\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"out\",\"secondsTotal\"],\"type\":\"object\"},\"registerStats\":{\"properties\":{\"createdTotal\":{\"description\":\"The total number of new register keys that were created\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"createdTotal\"],\"type\":\"object\"},\"transformStats\":{\"anyOf\":[{\"required\":[\"update\"]},{\"required\":[\"publish\"]}],\"description\":\"Stats for a specific transform of a derivation, which will have an update, publish, or both.\",\"properties\":{\"input\":{\"$ref\":\"#/$defs/docsAndBytes\",\"description\":\"The input documents that were fed into this transform.\"},\"publish\":{\"$ref\":\"#/$defs/invokeStats\",\"description\":\"The outputs from publish lambda invocations.\"},\"update\":{\"$ref\":\"#/$defs/invokeStats\",\"description\":\"The outputs from update lambda invocations, which were combined into registers.\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"input\"],\"type\":\"object\"}},\"$id\":\"builtin://flow/ops-stats-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Statistics related to the processing of a Flow capture, derivation, or materialization\",\"oneOf\":[{\"required\":[\"capture\"]},{\"required\":[\"derive\"]},{\"required\":[\"materialize\"]}],\"properties\":{\"capture\":{\"additionalProperties\":{\"properties\":{\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"right\":{\"$ref\":\"#/$defs/docsAndBytes\",\"description\":\"Documents fed into the combiner from the source\"}},\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"description\":\"Capture stats, organized by collection. The keys of this object are the collection names, and the values are the stats for that collection.\",\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"derive\":{\"properties\":{\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"registers\":{\"$ref\":\"#/$defs/registerStats\"},\"transforms\":{\"additionalProperties\":{\"$ref\":\"#/$defs/transformStats\"},\"description\":\"A map of each transform (transform name, not collection name) to stats for that transform\",\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"transforms\",\"out\"],\"type\":\"object\"},\"materialize\":{\"additionalProperties\":{\"properties\":{\"left\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"right\":{\"$ref\":\"#/$defs/docsAndBytes\"}},\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"description\":\"A map of each binding source (collection name) to combiner stats for that binding\",\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"openSecondsTotal\":{\"description\":\"Total time that the transaction was open before starting to commit\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"number\"},\"shard\":{\"$ref\":\"ops-shard-schema.json\"},\"ts\":{\"description\":\"Timestamp corresponding to the start of the transaction\",\"format\":\"date-time\",\"type\":\"string\"},\"txnCount\":{\"description\":\"Total number of transactions represented by this stats document\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"shard\",\"ts\",\"txnCount\",\"openSecondsTotal\"],\"title\":\"Flow task stats\",\"type\":\"object\"}" key_ptrs:"/shard/name" key_ptrs:"/shard/keyBegin" key_ptrs:"/shard/rClockBegin" key_ptrs:"/ts" uuid_ptr:"/_meta/uuid" partition_fields:"kind" partition_fields:"name" projections:<ptr:"/capture" field:"capture" inference:<types:"object" description:"Capture stats, organized by collection. The keys of this object are the collection names, and the values are the stats for that collection." exists:MAY > > projections:<ptr:"/derive" field:"derive" inference:<types:"object" exists:MAY > > projections:<ptr:"/derive/out" field:"derive/out" inference:<types:"object" exists:MAY > > projections:<ptr:"/derive/out/bytesTotal" field:"derive/out/bytesTotal" inference:<types:"integer" description:"Total number of bytes representing the JSON encoded documents" exists:MAY > > projections:<ptr:"/derive/out/docsTotal" field:"derive/out/docsTotal" inference:<types:"integer" description:"Total number of documents" exists:MAY > > projections:<ptr:"/derive/registers" field:"derive/registers" inference:<types:"object" exists:MAY > > projections:<ptr:"/derive/registers/createdTotal" field:"derive/registers/createdTotal" inference:<types:"integer" description:"The total number of new register keys that were created" exists:MAY > > projections:<ptr:"/derive/transforms" field:"derive/transforms" inference:<types:"object" description:"A map of each transform (transform name, not collection name) to stats for that transform" exists:MAY > > projections:<field:"flow_document" explicit:true inference:<types:"object" title:"Flow task stats" description:"Statistics related to the processing of a Flow capture, derivation, or materialization" exists:MUST > > projections:<ptr:"/shard/kind" field:"kind" explicit:true is_partition_key:true inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/materialize" field:"materialize" inference:<types:"object" description:"A map of each binding source (collection name) to combiner stats for that binding" exists:MAY > > projections:<ptr:"/shard/name" field:"name" explicit:true is_partition_key:true is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/openSecondsTotal" field:"openSecondsTotal" inference:<types:"number" description:"Total time that the transaction was open before starting to commit" exists:MUST > > projections:<ptr:"/shard" field:"shard" inference:<types:"object" title:"Flow shard id" description:"Identifies a specific shard of a task, which may be the source of a log message or metrics" exists:MUST > > projections:<ptr:"/shard/keyBegin" field:"shard/keyBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned key range" exists:MUST > > projections:<ptr:"/shard/kind" field:"shard/kind" inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/shard/name" field:"shard/name" is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/shard/rClockBegin" field:"shard/rClockBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned rClock range" exists:MUST > > projections:<ptr:"/ts" field:"ts" is_primary_key:true inference:<types:"string" string:<format:"date-time" > description:"Timestamp corresponding to the start of the transaction" exists:MUST > > projections:<ptr:"/txnCount" field:"txnCount" inference:<types:"integer" description:"Total number of transactions represented by this stats document" exists:MUST > > ack_json_template:"{\"_meta\":{\"ack\":true,\"uuid\":\"DocUUIDPlaceholder-329Bb50aa48EAa9ef\"}}" partition_template:<name:"ops/a/stats" replication:3 labels:<labels:<name:"app.gazette.dev/managed-by" value:"estuary.dev/flow" > labels:<name:"content-type" value:"application/x-ndjson" > labels:<name:"estuary.dev/build" value:"fixture" > labels:<name:"estuary.dev/collection" value:"ops/a/stats" > > fragment:<length:536870912 compression_codec:GZIP stores:"s3://a-bucket/" refresh_interval:<seconds:300 > path_postfix_template:"utc_date={{.Spool.FirstAppendTime.Format \"2006-01-02\"}}/utc_hour={{.Spool.FirstAppendTime.Format \"15\"}}" > flags:4 max_append_rate:4194304 > ),
  (*flow.CollectionSpec)(collection:"ops/example/logs" schema_uri:"builtin://flow/ops-log-schema.json" schema_json:"{\"$defs\":{\"__flowInline1\":{\"$id\":\"builtin://flow/ops-shard-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Identifies a specific shard of a task, which may be the source of a log message or metrics\",\"properties\":{\"keyBegin\":{\"description\":\"The inclusive beginning of the shard's assigned key range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"},\"kind\":{\"description\":\"The type of the catalog task\",\"enum\":[\"capture\",\"derivation\",\"materialization\"]},\"name\":{\"description\":\"The name of the catalog task (without the task type prefix)\",\"type\":\"string\"},\"rClockBegin\":{\"description\":\"The inclusive beginning of the shard's assigned rClock range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"}},\"required\":[\"kind\",\"name\",\"keyBegin\",\"rClockBegin\"],\"title\":\"Flow shard id\",\"type\":\"object\"}},\"$id\":\"builtin://flow/ops-log-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Logs related to the processing of a Flow capture, derivation, or materialization\",\"properties\":{\"fields\":{\"additionalProperties\":true,\"description\":\"Map of keys and values that are associated with this log entry.\",\"type\":\"object\"},\"level\":{\"enum\":[\"debug\",\"info\",\"warn\",\"error\"]},\"message\":{\"type\":\"string\"},\"shard\":{\"$ref\":\"ops-shard-schema.json\"},\"ts\":{\"description\":\"Timestamp corresponding to the start of the transaction\",\"format\":\"date-time\",\"type\":\"string\"}},\"required\":[\"shard\",\"ts\",\"level\",\"message\"],\"title\":\"Flow task logs\",\"type\":\"object\"}" key_ptrs:"/shard/name" key_ptrs:"/shard/keyBegin" key_ptrs:"/shard/rClockBegin" key_ptrs:"/ts" uuid_ptr:"/_meta/uuid" partition_fields:"kind" partition_fields:"name" projections:<ptr:"/fields" field:"fields" inference:<types:"object" description:"Map of keys and values that are associated with this log entry." exists:MAY > > projections:<field:"flow_document" explicit:true inference:<types:"object" title:"Flow task logs" description:"Logs related to the processing of a Flow capture, derivation, or materialization" exists:MUST > > projections:<ptr:"/shard/kind" field:"kind" explicit:true is_partition_key:true inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/level" field:"level" inference:<types:"string" string:<> exists:MUST > > projections:<ptr:"/message" field:"message" inference:<types:"string" string:<> exists:MUST > > projections:<ptr:"/shard/name" field:"name" explicit:true is_partition_key:true is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/shard" field:"shard" inference:<types:"object" title:"Flow shard id" description:"Identifies a specific shard of a task, which may be the source of a log message or metrics" exists:MUST > > projections:<ptr:"/shard/keyBegin" field:"shard/keyBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned key range" exists:MUST > > projections:<ptr:"/shard/kind" field:"shard/kind" inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/shard/name" field:"shard/name" is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/shard/rClockBegin" field:"shard/rClockBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned rClock range" exists:MUST > > projections:<ptr:"/ts" field:"ts" is_primary_key:true inference:<types:"string" string:<format:"date-time" > description:"Timestamp corresponding to the start of the transaction" exists:MUST > > ack_json_template:"{\"_meta\":{\"ack\":true,\"uuid\":\"DocUUIDPlaceholder-329Bb50aa48EAa9ef\"}}" partition_template:<name:"ops/example/logs" replication:3 labels:<labels:<name:"app.gazette.dev/managed-by" value:"estuary.dev/flow" > labels:<name:"content-type" value:"application/x-ndjson" > labels:<name:"estuary.dev/build" value:"fixture" > labels:<name:"estuary.dev/collection" value:"ops/example/logs" > > fragment:<length:536870912 compression_codec:GZIP stores:"s3://a-bucket/" refresh_interval:<seconds:300 > path_postfix_template:"utc_date={{.Spool.FirstAppendTime.Format \"2006-01-02\"}}/utc_hour={{.Spool.FirstAppendTime.Format \"15\"}}" > flags:4 max_append_rate:4194304 > ),
  (*flow.CollectionSpec)(collection:"ops/example/stats" schema_uri:"builtin://flow/ops-stats-schema.json" schema_json:"{\"$defs\":{\"__flowInline1\":{\"$id\":\"builtin://flow/ops-shard-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Identifies a specific shard of a task, which may be the source of a log message or metrics\",\"properties\":{\"keyBegin\":{\"description\":\"The inclusive beginning of the shard's assigned key range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"},\"kind\":{\"description\":\"The type of the catalog task\",\"enum\":[\"capture\",\"derivation\",\"materialization\"]},\"name\":{\"description\":\"The name of the catalog task (without the task type prefix)\",\"type\":\"string\"},\"rClockBegin\":{\"description\":\"The inclusive beginning of the shard's assigned rClock range\",\"pattern\":\"[0-9A-F]{8}\",\"type\":\"string\"}},\"required\":[\"kind\",\"name\",\"keyBegin\",\"rClockBegin\"],\"title\":\"Flow shard id\",\"type\":\"object\"},\"docsAndBytes\":{\"properties\":{\"bytesTotal\":{\"description\":\"Total number of bytes representing the JSON encoded documents\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"},\"docsTotal\":{\"description\":\"Total number of documents\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"docsTotal\",\"bytesTotal\"],\"type\":\"object\"},\"invokeStats\":{\"properties\":{\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"secondsTotal\":{\"type\":\"number\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"out\",\"secondsTotal\"],\"type\":\"object\"},\"registerStats\":{\"properties\":{\"createdTotal\":{\"description\":\"The total number of new register keys that were created\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"createdTotal\"],\"type\":\"object\"},\"transformStats\":{\"anyOf\":[{\"required\":[\"update\"]},{\"required\":[\"publish\"]}],\"description\":\"Stats for a specific transform of a derivation, which will have an update, publish, or both.\",\"properties\":{\"input\":{\"$ref\":\"#/$defs/docsAndBytes\",\"description\":\"The input documents that were fed into this transform.\"},\"publish\":{\"$ref\":\"#/$defs/invokeStats\",\"description\":\"The outputs from publish lambda invocations.\"},\"update\":{\"$ref\":\"#/$defs/invokeStats\",\"description\":\"The outputs from update lambda invocations, which were combined into registers.\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"input\"],\"type\":\"object\"}},\"$id\":\"builtin://flow/ops-stats-schema.json\",\"$schema\":\"https://json-schema.org/draft-07/schema\",\"description\":\"Statistics related to the processing of a Flow capture, derivation, or materialization\",\"oneOf\":[{\"required\":[\"capture\"]},{\"required\":[\"derive\"]},{\"required\":[\"materialize\"]}],\"properties\":{\"capture\":{\"additionalProperties\":{\"properties\":{\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"right\":{\"$ref\":\"#/$defs/docsAndBytes\",\"description\":\"Documents fed into the combiner from the source\"}},\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"description\":\"Capture stats, organized by collection. The keys of this object are the collection names, and the values are the stats for that collection.\",\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"derive\":{\"properties\":{\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"registers\":{\"$ref\":\"#/$defs/registerStats\"},\"transforms\":{\"additionalProperties\":{\"$ref\":\"#/$defs/transformStats\"},\"description\":\"A map of each transform (transform name, not collection name) to stats for that transform\",\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"transforms\",\"out\"],\"type\":\"object\"},\"materialize\":{\"additionalProperties\":{\"properties\":{\"left\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"out\":{\"$ref\":\"#/$defs/docsAndBytes\"},\"right\":{\"$ref\":\"#/$defs/docsAndBytes\"}},\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"description\":\"A map of each binding source (collection name) to combiner stats for that binding\",\"reduce\":{\"strategy\":\"merge\"},\"type\":\"object\"},\"openSecondsTotal\":{\"description\":\"Total time that the transaction was open before starting to commit\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"number\"},\"shard\":{\"$ref\":\"ops-shard-schema.json\"},\"ts\":{\"description\":\"Timestamp corresponding to the start of the transaction\",\"format\":\"date-time\",\"type\":\"string\"},\"txnCount\":{\"description\":\"Total number of transactions represented by this stats document\",\"reduce\":{\"strategy\":\"sum\"},\"type\":\"integer\"}},\"reduce\":{\"strategy\":\"merge\"},\"required\":[\"shard\",\"ts\",\"txnCount\",\"openSecondsTotal\"],\"title\":\"Flow task stats\",\"type\":\"object\"}" key_ptrs:"/shard/name" key_ptrs:"/shard/keyBegin" key_ptrs:"/shard/rClockBegin" key_ptrs:"/ts" uuid_ptr:"/_meta/uuid" partition_fields:"kind" partition_fields:"name" projections:<ptr:"/capture" field:"capture" inference:<types:"object" description:"Capture stats, organized by collection. The keys of this object are the collection names, and the values are the stats for that collection." exists:MAY > > projections:<ptr:"/derive" field:"derive" inference:<types:"object" exists:MAY > > projections:<ptr:"/derive/out" field:"derive/out" inference:<types:"object" exists:MAY > > projections:<ptr:"/derive/out/bytesTotal" field:"derive/out/bytesTotal" inference:<types:"integer" description:"Total number of bytes representing the JSON encoded documents" exists:MAY > > projections:<ptr:"/derive/out/docsTotal" field:"derive/out/docsTotal" inference:<types:"integer" description:"Total number of documents" exists:MAY > > projections:<ptr:"/derive/registers" field:"derive/registers" inference:<types:"object" exists:MAY > > projections:<ptr:"/derive/registers/createdTotal" field:"derive/registers/createdTotal" inference:<types:"integer" description:"The total number of new register keys that were created" exists:MAY > > projections:<ptr:"/derive/transforms" field:"derive/transforms" inference:<types:"object" description:"A map of each transform (transform name, not collection name) to stats for that transform" exists:MAY > > projections:<field:"flow_document" explicit:true inference:<types:"object" title:"Flow task stats" description:"Statistics related to the processing of a Flow capture, derivation, or materialization" exists:MUST > > projections:<ptr:"/shard/kind" field:"kind" explicit:true is_partition_key:true inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/materialize" field:"materialize" inference:<types:"object" description:"A map of each binding source (collection name) to combiner stats for that binding" exists:MAY > > projections:<ptr:"/shard/name" field:"name" explicit:true is_partition_key:true is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/openSecondsTotal" field:"openSecondsTotal" inference:<types:"number" description:"Total time that the transaction was open before starting to commit" exists:MUST > > projections:<ptr:"/shard" field:"shard" inference:<types:"object" title:"Flow shard id" description:"Identifies a specific shard of a task, which may be the source of a log message or metrics" exists:MUST > > projections:<ptr:"/shard/keyBegin" field:"shard/keyBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned key range" exists:MUST > > projections:<ptr:"/shard/kind" field:"shard/kind" inference:<types:"string" string:<> description:"The type of the catalog task" exists:MUST > > projections:<ptr:"/shard/name" field:"shard/name" is_primary_key:true inference:<types:"string" string:<> description:"The name of the catalog task (without the task type prefix)" exists:MUST > > projections:<ptr:"/shard/rClockBegin" field:"shard/rClockBegin" is_primary_key:true inference:<types:"string" string:<> description:"The inclusive beginning of the shard's assigned rClock range" exists:MUST > > projections:<ptr:"/ts" field:"ts" is_primary_key:true inference:<types:"string" string:<format:"date-time" > description:"Timestamp corresponding to the start of the transaction" exists:MUST > > projections:<ptr:"/txnCount" field:"txnCount" inference:<types:"integer" description:"Total number of transactions represented by this stats document" exists:MUST > > ack_json_template:"{\"_meta\":{\"ack\":true,\"uuid\":\"DocUUIDPlaceholder-329Bb50aa48EAa9ef\"}}" partition_template:<name:"ops/example/stats" replication:3 labels:<labels:<name:"app.gazette.dev/managed-by" value:"estuary.dev/flow" > labels:<name:"content-type" value:"application/x-ndjson" > labels:<name:"estuary.dev/build" value:"fixture" > labels:<name:"estuary.dev/collection" value:"ops/example/stats" > > fragment:<length:536870912 compression_codec:GZIP stores:"s3://a-bucket/" refresh_interval:<seconds:300 > path_postfix_template:"utc_date={{.Spool.FirstAppendTime.Format \"2006-01-02\"}}/utc_hour={{.Spool.FirstAppendTime.Format \"15\"}}" > flags:4 max_append_rate:4194304 > )
}
