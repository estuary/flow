-- This table is the source of truth for all materializations into this system.
CREATE TABLE IF NOT EXISTS "flow_materializations" (
	-- The name of the target table of the materialization, which may or may not include a schema and catalog prefix
	"table_name" TEXT NOT NULL,
	-- A JSON representation of the materialization.
	"spec" JSON NOT NULL,

	PRIMARY KEY("table_name")
);


SELECT "spec" FROM "flow_materializations" WHERE "table_name" = $1;

INSERT INTO "flow_materializations" ("table_name", "spec") VALUES ($1, $2);

UPDATE "flow_materializations" SET "spec" = $1 WHERE "table_name" = $2;
