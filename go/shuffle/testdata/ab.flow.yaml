collections:
  a/collection:
    schema:
      type: object
      properties:
        a: { type: integer }
        aa: { type: string }
        b: { type: string }
      required: [a, aa]
    key: [/a, /aa]

  a/derivation:
    schema:
      type: object
      properties:
        a: { type: integer }
      required: [a]
    key: [/a]

    derivation:
      typescript:
        module: |
          import something;
          doSomething();
      transform:
        fromCollection:
          source: { name: a/collection }
          publish: { lambda: typescript }

storageMappings:
  "": { stores: [{ provider: S3, bucket: a-bucket }] }
