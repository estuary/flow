<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/connect-network" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Secure connections | Estuary Flow Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.estuary.dev/pr-preview/pr-2155/img/estuary-new.png"><meta data-rh="true" name="twitter:image" content="https://docs.estuary.dev/pr-preview/pr-2155/img/estuary-new.png"><meta data-rh="true" property="og:url" content="https://docs.estuary.dev/pr-preview/pr-2155/guides/connect-network/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Secure connections | Estuary Flow Documentation"><meta data-rh="true" name="description" content="There are various options for more securely connecting to your endpoints depending on your environment and needs."><meta data-rh="true" property="og:description" content="There are various options for more securely connecting to your endpoints depending on your environment and needs."><link data-rh="true" rel="icon" href="/pr-preview/pr-2155/img/favicon-2.ico"><link data-rh="true" rel="canonical" href="https://docs.estuary.dev/pr-preview/pr-2155/guides/connect-network/"><link data-rh="true" rel="alternate" href="https://docs.estuary.dev/pr-preview/pr-2155/guides/connect-network/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.estuary.dev/pr-preview/pr-2155/guides/connect-network/" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-WK8SB2L",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>
<script id="ai-widget-script" async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="349e5b72-3e5a-4c19-8b7a-27c7b90caa0f" data-project-name="Estuary" data-modal-title="Estuary AI Assistant" data-project-color="#5072EB" data-button-text-color="#F2F2F2" data-project-logo="https://docs.estuary.dev/img/estuary-new.png" data-modal-example-questions-title="Try asking me..." data-modal-disclaimer="This AI assistant answers questions using Estuary&#39;s [documentation](https://docs.estuary.dev/), [blogs](https://estuary.dev/blog/), and additional resources. If you can&#39;t find your answer, join us on [Slack](https://go.estuary.dev/slack)." data-modal-example-questions="How does CDC work in Estuary?,How can I deploy to a private cloud?,How do I connect to PostgreSQL?,Is Estuary Flow scalable?" data-uncertain-answer-callout="I may not have all of the information on that topic. I bet someone can answer it in [Slack](https://go.estuary.dev/slack)."></script><link rel="stylesheet" href="/pr-preview/pr-2155/assets/css/styles.5ecd8a62.css">
<script src="/pr-preview/pr-2155/assets/js/runtime~main.1b5c6ba5.js" defer="defer"></script>
<script src="/pr-preview/pr-2155/assets/js/main.281b7c4f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK8SB2L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/pr-2155/"><div class="navbar__logo"><img src="/pr-preview/pr-2155/img/estuary-new.png" alt="Estuary Flow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/pr-2155/img/estuary-new.png" alt="Estuary Flow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Estuary Flow</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-2155/">Documentation</a><div class="navbar__item"><a href="https://estuary.dev/blog">Blog</a></div><div class="navbar__item button-link"><a href="https://dashboard.estuary.dev/register">Try Estuary</a></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2155/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/pr-preview/pr-2155/guides/">User guides</a><button aria-label="Collapse sidebar category &#x27;User guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/create-dataflow/">Create a basic Data Flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2155/guides/system-specific-dataflows/">Create a Data Flow for specific systems</a><button aria-label="Expand sidebar category &#x27;Create a Data Flow for specific systems&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/edit-data-flows/">Edit Data Flows in the web app</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2155/guides/flowctl/">Use flowctl</a><button aria-label="Expand sidebar category &#x27;Use flowctl&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2155/guides/byoc/">BYOC (Bring Your Own Cloud)</a><button aria-label="Expand sidebar category &#x27;BYOC (Bring Your Own Cloud)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-2155/guides/connect-network/">Secure connections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/customize-materialization-fields/">Customize materialized fields</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/dbt-integration/">dbt Cloud Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/dekaf_reading_collections_from_kafka/">Connecting to Estuary Flow from Kafka using Dekaf</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/derivation_tutorial_sql/">How to transform data using SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/get-started-with-flowctl/">Getting Started With flowctl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/how_to_generate_refresh_token/">How to generate an Estuary Flow Refresh Token</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/howto_join_two_collections_typescript/">How to join two collections (TypeScript)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/schema-evolution/">Schema evolution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2155/guides/transform_data_using_typescript/">How to transform data using TypeScript</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2155/concepts/">Concepts</a><button aria-label="Expand sidebar category &#x27;Concepts&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-2155/reference/Connectors/">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-2155/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-2155/guides/"><span itemprop="name">User guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Secure connections</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Secure connections</h1></header>
<p>There are various options for more securely connecting to your endpoints depending on your environment and needs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-connections-with-ssh-tunneling">Configure connections with SSH tunneling<a href="#configure-connections-with-ssh-tunneling" class="hash-link" aria-label="Direct link to Configure connections with SSH tunneling" title="Direct link to Configure connections with SSH tunneling">​</a></h2>
<p>Flow connects to certain types of endpoints — generally databases — using their IP address and port.
For added security, you can configure <a href="https://www.ssh.com/academy/ssh/tunneling/example#local-forwarding" target="_blank" rel="noopener noreferrer">SSH tunneling</a>, also known as port forwarding.
You configure this in the <code>networkTunnel</code> section of applicable capture or materialization definitions, but
before you can do so, you need a properly configured SSH server on your internal network or cloud hosting platform.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If permitted by your organization, a quicker way to connect to a secure database is to <a href="/pr-preview/pr-2155/reference/allow-ip-addresses/">allowlist the Estuary IP addresses</a>.</p><p>For help completing this task on different cloud hosting platforms,
see the documentation for the <a href="/pr-preview/pr-2155/reference/Connectors/">connector</a> you&#x27;re using.</p></div></div>
<p>This guide includes setup steps for popular cloud platforms,
as well as generalized setup that provides a basic roadmap for on-premise servers or other cloud platforms.</p>
<p>After completing the appropriate setup requirements, proceed to the <a href="#configuration">configuration</a> section
to add your SSH server to your capture or materialization definition.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-setup">General setup<a href="#general-setup" class="hash-link" aria-label="Direct link to General setup" title="Direct link to General setup">​</a></h3>
<ol>
<li>
<p>Activate an <a href="https://www.ssh.com/academy/ssh/server#availability-of-ssh-servers" target="_blank" rel="noopener noreferrer">SSH implementation on a server</a>, if you don&#x27;t have one already.
Consult the documentation for your server&#x27;s operating system and/or cloud service provider, as the steps will vary.
Configure the server to your organization&#x27;s standards, or reference the <a href="https://www.ssh.com/academy/ssh/sshd_config" target="_blank" rel="noopener noreferrer">SSH documentation</a> for
basic configuration options.</p>
</li>
<li>
<p>Referencing the config files and shell output, collect the following information:</p>
</li>
</ol>
<ul>
<li>The SSH <strong>user</strong>, which will be used to log into the SSH server, for example, <code>sshuser</code>. You may choose to create a new
user for this workflow.</li>
<li>The <strong>SSH endpoint</strong> for the SSH server, formatted as <code>ssh://user@hostname[:port]</code>. This may look like the any of following:<!-- -->
<ul>
<li>
<p><code>ssh://sshuser@ec2-198-21-98-1.compute-1.amazonaws.com</code></p>
</li>
<li>
<p><code>ssh://sshuser@198.21.98.1</code></p>
</li>
<li>
<p><code>ssh://sshuser@198.21.98.1:22</code></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Hint</div><div class="admonitionContent_BuS1"><p>The <a href="https://www.ssh.com/academy/ssh/port" target="_blank" rel="noopener noreferrer">SSH default port is 22</a>.
Depending on where your server is hosted, you may not be required to specify a port,
but we recommend specifying <code>:22</code> in all cases to ensure a connection can be made.</p></div></div>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>
<p>In the <code>.ssh</code> subdirectory of your user home directory,
look for the PEM file that contains the private SSH key. Check that it starts with <code>-----BEGIN RSA PRIVATE KEY-----</code>,
which indicates it is an RSA-based file.</p>
<ul>
<li>If no such file exists, generate one using the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -m PEM -t rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If a PEM file exists, but starts with <code>-----BEGIN OPENSSH PRIVATE KEY-----</code>, convert it with the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -p -N &quot;&quot; -m pem -f /path/to/key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Taken together, these configuration details would allow you to log into the SSH server from your local machine.
They&#x27;ll allow the connector to do the same.</p>
</li>
<li>
<p>Configure your internal network to allow the SSH server to access your capture or materialization endpoint.</p>
</li>
<li>
<p>To grant external access to the SSH server, it&#x27;s essential to configure your network settings accordingly. The approach you take will be dictated by your organization&#x27;s IT policies. One recommended step is to <a href="/pr-preview/pr-2155/reference/allow-ip-addresses/">allowlist the Estuary IP addresses</a>. This ensures that connections from this specific IP are permitted through your network&#x27;s firewall or security measures.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-for-aws">Setup for AWS<a href="#setup-for-aws" class="hash-link" aria-label="Direct link to Setup for AWS" title="Direct link to Setup for AWS">​</a></h3>
<p>To allow SSH tunneling to a database instance hosted on AWS, you&#x27;ll need to create a virtual computing environment, or <em>instance</em>, in Amazon EC2.</p>
<ol>
<li>
<p>Begin by finding your public SSH key on your local machine.
In the <code>.ssh</code> subdirectory of your user home directory,
look for the PEM file that contains the private SSH key. Check that it starts with <code>-----BEGIN RSA PRIVATE KEY-----</code>,
which indicates it is an RSA-based file.</p>
<ul>
<li>If no such file exists, generate one using the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -m PEM -t rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If a PEM file exists, but starts with <code>-----BEGIN OPENSSH PRIVATE KEY-----</code>, convert it with the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -p -N &quot;&quot; -m pem -f /path/to/key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#how-to-generate-your-own-key-and-import-it-to-aws" target="_blank" rel="noopener noreferrer">Import your SSH key into AWS</a>.</p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/LaunchingAndUsingInstances.html" target="_blank" rel="noopener noreferrer">Launch a new instance in EC2</a>. During setup:</p>
<ul>
<li>Configure the security group to allow SSH connection from anywhere.</li>
<li>When selecting a key pair, choose the key you just imported.</li>
</ul>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html" target="_blank" rel="noopener noreferrer">Connect to the instance</a>,
setting the user name to <code>ec2-user</code>.</p>
</li>
<li>
<p>Find and note the <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html#vpc-dns-viewing" target="_blank" rel="noopener noreferrer">instance&#x27;s public DNS</a>. This will be formatted like: <code>ec2-198-21-98-1.compute-1.amazonaws.com</code>.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-for-google-cloud">Setup for Google Cloud<a href="#setup-for-google-cloud" class="hash-link" aria-label="Direct link to Setup for Google Cloud" title="Direct link to Setup for Google Cloud">​</a></h3>
<p>To allow SSH tunneling to a database instance hosted on Google Cloud, you must set up a virtual machine (VM).</p>
<ol>
<li>
<p>Begin by finding your public SSH key on your local machine.
In the <code>.ssh</code> subdirectory of your user home directory,
look for the PEM file that contains the private SSH key. Check that it starts with <code>-----BEGIN RSA PRIVATE KEY-----</code>,
which indicates it is an RSA-based file.</p>
<ul>
<li>If no such file exists, generate one using the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -m PEM -t rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If a PEM file exists, but starts with <code>-----BEGIN OPENSSH PRIVATE KEY-----</code>, convert it with the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -p -N &quot;&quot; -m pem -f /path/to/key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If your Google login differs from your local username, generate a key that includes your Google email address as a comment:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -m PEM -t rsa -C user@domain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><a href="https://cloud.google.com/compute/docs/instances/create-start-instance" target="_blank" rel="noopener noreferrer">Create and start a new VM in GCP</a>, <a href="https://cloud.google.com/compute/docs/images/os-details#user-space-features" target="_blank" rel="noopener noreferrer">choosing an image that supports OS Login</a>.</p>
</li>
<li>
<p><a href="https://cloud.google.com/compute/docs/connect/add-ssh-keys" target="_blank" rel="noopener noreferrer">Add your public key to the VM</a>.</p>
</li>
<li>
<p><a href="https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address" target="_blank" rel="noopener noreferrer">Reserve an external IP address</a> and connect it to the VM during setup.
Note the generated address.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-for-azure">Setup for Azure<a href="#setup-for-azure" class="hash-link" aria-label="Direct link to Setup for Azure" title="Direct link to Setup for Azure">​</a></h3>
<p>To allow SSH tunneling to a database instance hosted on Azure, you&#x27;ll need to create a virtual machine (VM) in the same virtual network as your endpoint database.</p>
<ol>
<li>
<p>Begin by finding your public SSH key on your local machine.
In the <code>.ssh</code> subdirectory of your user home directory,
look for the PEM file that contains the private SSH key. Check that it starts with <code>-----BEGIN RSA PRIVATE KEY-----</code>,
which indicates it is an RSA-based file.</p>
<ul>
<li>If no such file exists, generate one using the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -m PEM -t rsa</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If a PEM file exists, but starts with <code>-----BEGIN OPENSSH PRIVATE KEY-----</code>, convert it with the command:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   ssh-keygen -p -N &quot;&quot; -m pem -f /path/to/key</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create and connect to a VM in a <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview" target="_blank" rel="noopener noreferrer">virtual network</a>, and add the endpoint database to the network.</p>
<ol>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/virtual-network/quick-create-portal" target="_blank" rel="noopener noreferrer">Create a new virtual network and subnet</a>.</p>
</li>
<li>
<p>Create a <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/quick-create-portal" target="_blank" rel="noopener noreferrer">Linux</a> or <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/quick-create-portal" target="_blank" rel="noopener noreferrer">Windows</a> VM within the virtual network,
directing the SSH public key source to the public key you generated previously.</p>
</li>
<li>
<p>Note the VM&#x27;s public IP; you&#x27;ll need this later.</p>
</li>
</ol>
</li>
<li>
<p>Create a service endpoint for your database in the same virtual network as your VM.
Instructions for Azure Database For PostgreSQL can be found <a href="https://docs.microsoft.com/en-us/azure/postgresql/howto-manage-vnet-using-portal" target="_blank" rel="noopener noreferrer">here</a>;
note that instructions for other database engines may be different.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h3>
<p>After you&#x27;ve completed the prerequisites, you should have the following parameters:</p>
<ul>
<li>
<p><strong>SSH Endpoint</strong> / <code>sshEndpoint</code>: the remote SSH server&#x27;s hostname, or public IP address, formatted as <code>ssh://user@hostname[:port]</code></p>
<p>The <a href="https://www.ssh.com/academy/ssh/port" target="_blank" rel="noopener noreferrer">SSH default port is 22</a>.
Depending on where your server is hosted, you may not be required to specify a port,
but we recommend specifying <code>:22</code> in all cases to ensure a connection can be made.</p>
</li>
<li>
<p><strong>Private Key</strong> / <code>privateKey</code>: the contents of the SSH private key file</p>
</li>
</ul>
<p>Use these to add SSH tunneling to your capture or materialization definition, either by filling in the corresponding fields
in the web app, or by working with the YAML directly. Reference the <a href="/pr-preview/pr-2155/concepts/connectors/#connecting-to-endpoints-on-secure-networks">Connectors</a> page for a YAML sample.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expose-ports-on-a-reverse-ssh-tunnel-bastion">Expose ports on a Reverse SSH Tunnel Bastion<a href="#expose-ports-on-a-reverse-ssh-tunnel-bastion" class="hash-link" aria-label="Direct link to Expose ports on a Reverse SSH Tunnel Bastion" title="Direct link to Expose ports on a Reverse SSH Tunnel Bastion">​</a></h2>
<p>If you are a customer of our <a href="/pr-preview/pr-2155/getting-started/deployment-options/#private-deployment">Private Deployment</a> or <a href="/pr-preview/pr-2155/getting-started/deployment-options/#byoc-bring-your-own-cloud">BYOC</a>, we can deploy a bastion server for you which can be used to expose specific ports on. We will provide you with the bastion server address, port and key.</p>
<p>Assuming you have a database running on a host named <code>db.example.com</code>, on port 5678, and you want to expose this as port 8080 on the bastion, you would run the following command on the database machine or a machine which can access your database through the network:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -o &#x27;ConnectTimeout=5s&#x27; \\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -o &#x27;ServerAliveInterval=30&#x27; \\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -i bastion.key \\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -N -T \\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -R 8080:db.example.com:5678 \\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssh://tunnel@bastion.your-bastion-host.com:2222</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once the port is exposed, you can establish a tunnel to the same bastion when setting up your task on the Estuary Flow web app, specifying the bastion&#x27;s connection string and key, and using <code>localhost:8080</code> as the address of your endpoint (since the port will be opened on the <code>localhost</code> of the bastion).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-connections-with-privatelink">Configure connections with PrivateLink<a href="#configure-connections-with-privatelink" class="hash-link" aria-label="Direct link to Configure connections with PrivateLink" title="Direct link to Configure connections with PrivateLink">​</a></h2>
<p>If you use Estuary in a <a href="/pr-preview/pr-2155/getting-started/deployment-options/#private-deployment">private deployment</a> or <a href="/pr-preview/pr-2155/getting-started/deployment-options/#byoc-bring-your-own-cloud">Bring Your Own Cloud</a> setup, you can securely connect services using PrivateLink.
This lets you transfer data between your private or BYOC deployment and external services without exposing it to the public internet.</p>
<p>Different cloud providers have different setup steps to start using PrivateLink.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-privatelink">AWS PrivateLink<a href="#aws-privatelink" class="hash-link" aria-label="Direct link to AWS PrivateLink" title="Direct link to AWS PrivateLink">​</a></h3>
<p>For AWS private or BYOC deployments, we can establish connections to your endpoints using <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/what-is-privatelink.html" target="_blank" rel="noopener noreferrer">AWS PrivateLink</a>.</p>
<p>To do so, you will first need to create a Virtual Private Cloud (VPC) endpoint service. You can create or manage your endpoint services on the <a href="https://console.aws.amazon.com/vpc/" target="_blank" rel="noopener noreferrer">AWS VPC dashboard</a>. Make sure the endpoint service is in the same region as your private deployment.</p>
<p>We will then need the following information to establish the connection. Send these details to your Estuary point of contact:</p>
<ul>
<li>The endpoint service name, such as <code>com.amazonaws.vpce.us-east-1.vpce-svc-0123456789abcdef</code></li>
<li>The Availability Zone IDs it offers, such as <code>[use1-az4, use1-az6]</code></li>
</ul>
<p>After establishing the connection, we will provide a DNS name which you can use as the hostname when connecting to the database.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="variations">Variations<a href="#variations" class="hash-link" aria-label="Direct link to Variations" title="Direct link to Variations">​</a></h4>
<p>Certain services may use AWS PrivateLink in unique ways. More detailed instructions for these services are provided below.</p>
<p><strong>MongoDB</strong></p>
<p>A MongoDB connection will use an altered endpoint ID to retrieve the hostname.</p>
<p>Create the endpoint service in AWS and receive back the DNS name from Estuary as for a standard AWS PrivateLink connection. To finish setup:</p>
<ol>
<li>
<p>Take the first 22 characters of the DNS name, such as <code>vpce-0123456789abcdefg</code>.</p>
</li>
<li>
<p>In your MongoDB dashboard, navigate to the <strong>Network Access</strong> section.</p>
</li>
<li>
<p>On the <strong>Private Endpoint</strong> page in this section, add a new private endpoint.</p>
</li>
<li>
<p>In the setup modal, choose your cloud provider and Atlas region. You may skip the &quot;Interface Endpoint&quot; step.</p>
</li>
<li>
<p>As part of the <strong>Finalize Endpoint Connection</strong> step, add the 22-character DNS string as <strong>Your VPC Endpoint ID</strong>.</p>
</li>
<li>
<p>Click <strong>Create</strong> and wait until the Endpoint Status is <code>Available</code>.</p>
</li>
</ol>
<p>MongoDB will create a URL for this endpoint. You can use this as the hostname in Estuary to connect with your database.</p>
<p>You can find this URL as you would any other Atlas hostname:</p>
<ol>
<li>
<p>Bring up the <strong>Connect</strong> modal for your MongoDB cluster.</p>
</li>
<li>
<p>Make sure to choose <strong>Private Endpoint</strong> as your Connection Type and select the endpoint you created.</p>
</li>
<li>
<p>Choose the <strong>Shell</strong> connection method. The shell command will display your MongoDB URL (for example, <code>mongodb+srv://abc-123.mongodb.net/</code>).</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="azure-private-link">Azure Private Link<a href="#azure-private-link" class="hash-link" aria-label="Direct link to Azure Private Link" title="Direct link to Azure Private Link">​</a></h3>
<p>For Azure private or BYOC deployments, we can establish connections to your endpoints using Azure Private Link.</p>
<p>You will need to create an <a href="https://learn.microsoft.com/en-us/azure/private-link/private-link-service-overview" target="_blank" rel="noopener noreferrer">Azure Private Link Service</a> which also requires having an <a href="https://learn.microsoft.com/en-us/azure/load-balancer/load-balancer-overview" target="_blank" rel="noopener noreferrer">Azure Load Balancer</a> in front of the services you intend to expose. After creating these resources, make sure your LoadBalancer is able to route traffic correctly to your instances. You can check this by looking at the Monitoring -&gt; Metrics page of your LoadBalancer and checking for its Health Probe Status.</p>
<p>Once you have your Private Link Service set up, we need these details from you to establish the connection. Send them to your Estuary point of contact:</p>
<ul>
<li>The service URI, like <code>/subscriptions/abcdefg-12345-12cc-1234-1234abcd1234abc/resourceGroups/foo/providers/Microsoft.Network/privateLinkServices/bar-service</code>; this can be found by navigating to the private link service&#x27;s details page in your Azure Portal and copying the URL</li>
<li>Location for the private endpoint, like <code>westus</code></li>
</ul>
<p>After establishing the connection we will give you a private IP address which you can use to connect to your endpoint when setting up your task on the Estuary Flow web app.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/estuary/flow/edit/master/site/docs/guides/connect-network.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-2155/guides/byoc/azure/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Azure BYOC (Bring Your Own Cloud)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-2155/guides/customize-materialization-fields/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customize materialized fields</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configure-connections-with-ssh-tunneling" class="table-of-contents__link toc-highlight">Configure connections with SSH tunneling</a><ul><li><a href="#general-setup" class="table-of-contents__link toc-highlight">General setup</a></li><li><a href="#setup-for-aws" class="table-of-contents__link toc-highlight">Setup for AWS</a></li><li><a href="#setup-for-google-cloud" class="table-of-contents__link toc-highlight">Setup for Google Cloud</a></li><li><a href="#setup-for-azure" class="table-of-contents__link toc-highlight">Setup for Azure</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li></ul></li><li><a href="#expose-ports-on-a-reverse-ssh-tunnel-bastion" class="table-of-contents__link toc-highlight">Expose ports on a Reverse SSH Tunnel Bastion</a></li><li><a href="#configure-connections-with-privatelink" class="table-of-contents__link toc-highlight">Configure connections with PrivateLink</a><ul><li><a href="#aws-privatelink" class="table-of-contents__link toc-highlight">AWS PrivateLink</a></li><li><a href="#azure-private-link" class="table-of-contents__link toc-highlight">Azure Private Link</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/pr-preview/pr-2155/">Flow Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://go.estuary.dev/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/EstuaryDev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@estuarydev" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Estuary Technologies, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>