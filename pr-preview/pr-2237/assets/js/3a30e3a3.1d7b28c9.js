"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2002],{28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>i});var n=s(96540);const a={},r=n.createContext(a);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),n.createElement(r.Provider,{value:t},e.children)}},34969:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"guides/iam-auth/aws","title":"AWS IAM Authentication","description":"Flow supports IAM authentication with Amazon Web Services such as RDS and S3 using a role created by you which has access to the resources, and has trusted our AWS user to be able to assume it. Note however that not all connectors currently support using IAM authentication.","source":"@site/docs/guides/iam-auth/aws.md","sourceDirName":"guides/iam-auth","slug":"/guides/iam-auth/aws","permalink":"/pr-preview/pr-2237/guides/iam-auth/aws","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/guides/iam-auth/aws.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Create a basic Data Flow","permalink":"/pr-preview/pr-2237/guides/create-dataflow"},"next":{"title":"Google Cloud IAM Authentication","permalink":"/pr-preview/pr-2237/guides/iam-auth/gcp"}}');var a=s(74848),r=s(28453);const o={},i="AWS IAM Authentication",c={},h=[{value:"Role with Resource Access",id:"role-with-resource-access",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"aws-iam-authentication",children:"AWS IAM Authentication"})}),"\n",(0,a.jsx)(t.p,{children:"Flow supports IAM authentication with Amazon Web Services such as RDS and S3 using a role created by you which has access to the resources, and has trusted our AWS user to be able to assume it. Note however that not all connectors currently support using IAM authentication."}),"\n",(0,a.jsx)(t.h2,{id:"role-with-resource-access",children:"Role with Resource Access"}),"\n",(0,a.jsxs)(t.p,{children:["In order to authenticate using AWS IAM, you need to have a role set up which has access to the resource you are trying to authenticate with. Follow the guide ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html",children:"here"}),' to create a role which has access to your resource. Then in the details page of your role, head to "Trust relationships" tab and add the following trust policy, replacing the principal with one of the AWS user ARNs in the table below depending on the data plane (if you use a private deployment or BYOC, we will provide you with this value) you use and ',(0,a.jsx)(t.code,{children:"ExternalId"})," with your tenant name so only tasks from your tenant are allowed to assume this role:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Principal": {\n                "AWS": "<DATA PLANE USER>"\n            },\n            "Action": "sts:AssumeRole",\n            "Condition": {\n                "StringLike": {\n                    "sts:ExternalId": "yourTenantName/*"\n                }\n            }\n        }\n    ]\n}\n'})}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Data Plane"}),(0,a.jsx)(t.th,{children:"SUBJECT_ATTRIBUTE_VALUE"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"US central-1 GCP data plane"}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"arn:aws:iam::789740162118:user/flow-aws"})})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"EU west-1 AWS data plane"}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"arn:aws:iam::770785070253:user/data-planes/data-plane-342o84ecos0opkov"})})]})]})]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);