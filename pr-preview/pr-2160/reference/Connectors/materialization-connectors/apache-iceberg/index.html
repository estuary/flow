<!DOCTYPE html><html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/Connectors/materialization-connectors/apache-iceberg" data-has-hydrated="false"><head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Apache Iceberg Connector | Estuary Flow Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.estuary.dev/pr-preview/pr-2160/img/estuary-new.png"><meta data-rh="true" name="twitter:image" content="https://docs.estuary.dev/pr-preview/pr-2160/img/estuary-new.png"><meta data-rh="true" property="og:url" content="https://docs.estuary.dev/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-iceberg/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Apache Iceberg | Estuary Flow Documentation"><meta data-rh="true" name="description" content="This connector materializes Flow collections into Iceberg tables. It"><meta data-rh="true" property="og:description" content="This connector materializes Flow collections into Iceberg tables. It"><link data-rh="true" rel="icon" href="/pr-preview/pr-2160/img/favicon-2.ico"><link data-rh="true" rel="canonical" href="https://docs.estuary.dev/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-iceberg/"><link data-rh="true" rel="alternate" href="https://docs.estuary.dev/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-iceberg/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.estuary.dev/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-iceberg/" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-WK8SB2L",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>
<script id="ai-widget-script" async="" src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="349e5b72-3e5a-4c19-8b7a-27c7b90caa0f" data-project-name="Estuary" data-modal-title="Estuary AI Assistant" data-project-color="#5072EB" data-button-text-color="#F2F2F2" data-project-logo="https://docs.estuary.dev/img/estuary-new.png" data-modal-example-questions-title="Try asking me..." data-modal-disclaimer="This AI assistant answers questions using Estuary's [documentation](https://docs.estuary.dev/), [blogs](https://estuary.dev/blog/), and additional resources. If you can't find your answer, join us on [Slack](https://go.estuary.dev/slack)." data-modal-example-questions="How does CDC work in Estuary?,How can I deploy to a private cloud?,How do I connect to PostgreSQL?,Is Estuary Flow scalable?" data-uncertain-answer-callout="I may not have all of the information on that topic. I bet someone can answer it in [Slack](https://go.estuary.dev/slack)."></script><link rel="stylesheet" href="/pr-preview/pr-2160/assets/css/styles.5ecd8a62.css">
<script src="/pr-preview/pr-2160/assets/js/runtime~main.f7d1e44b.js" defer="defer"></script>
<script src="/pr-preview/pr-2160/assets/js/main.e5a026b0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK8SB2L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/pr-2160/"><div class="navbar__logo"><img src="/pr-preview/pr-2160/img/estuary-new.png" alt="Estuary Flow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/pr-2160/img/estuary-new.png" alt="Estuary Flow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Estuary Flow</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-2160/">Documentation</a><div class="navbar__item"><a href="https://estuary.dev/blog">Blog</a></div><div class="navbar__item button-link"><a href="https://dashboard.estuary.dev/register">Try Estuary</a></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2160/">Getting Started</a><button aria-label="Expand sidebar category 'Getting Started'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2160/guides/">User guides</a><button aria-label="Expand sidebar category 'User guides'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2160/concepts/">Concepts</a><button aria-label="Expand sidebar category 'Concepts'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/pr-preview/pr-2160/reference/Connectors/">Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/">Connectors</a><button aria-label="Collapse sidebar category 'Connectors'" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/capture-connectors/">Capture connectors</a><button aria-label="Expand sidebar category 'Capture connectors'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/">Materialization connectors</a><button aria-label="Collapse sidebar category 'Materialization connectors'" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/alloydb/">AlloyDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/amazon-dynamodb/">Amazon DynamoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/amazon-redshift/">Amazon Redshift</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/amazon-s3-csv/">CSV Files in Amazon S3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/amazon-s3-iceberg/">Apache Iceberg Tables in Amazon S3  (delta updates)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/amazon-s3-parquet/">Apache Parquet Files in Amazon S3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-iceberg/">Apache Iceberg</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-kafka/">Apache Kafka</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/azure-fabric-warehouse/">Microsoft Azure Fabric Warehouse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/BigQuery/">Google BigQuery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/databricks/">Databricks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/Dekaf/">Dekaf</a><button aria-label="Expand sidebar category 'Dekaf'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/Elasticsearch/">Elasticsearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/Firebolt/">Firebolt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/google-gcs-csv/">CSV Files in Google GCS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/google-gcs-parquet/">Apache Parquet Files in Google GCS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/google-pubsub/">Google Cloud Pub/Sub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/Google-sheets/">Google Sheets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/http-webhook/">HTTP Webhook</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/SQLServer/">Microsoft SQLServer</a><button aria-label="Expand sidebar category 'Microsoft SQLServer'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/mongodb/">MongoDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/motherduck/">MotherDuck</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/MySQL/">MySQL</a><button aria-label="Expand sidebar category 'MySQL'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/mysql-heatwave/">MySQL HeatWave</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/pinecone/">Pinecone</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/PostgreSQL/">PostgreSQL</a><button aria-label="Expand sidebar category 'PostgreSQL'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/Rockset/">Rockset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/slack/">Slack</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/Snowflake/">Snowflake</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/SQLite/">SQLite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/starburst/">Starburst</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/timescaledb/">TimescaleDB</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/dekaf/">Dekaf integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Connectors/materialization-protocol/">Materialization Protocol</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/authentication/">Authorizing users and authenticating with Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/editing/">Editing considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/notifications/">Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/time-travel/">Time Travel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/Configuring-task-shards/">Configuring task shards</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/pr-preview/pr-2160/reference/reduction-strategies/">Reduction strategies</a><button aria-label="Expand sidebar category 'Reduction strategies'" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/working-logs-stats/">Working with logs and statistics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/organizing-catalogs/">Organizing a Flow catalog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/allow-ip-addresses/">Allowlisting IP Addresses for Estuary Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/backfilling-data/">Backfilling Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/deletions/">Handling Deletions in Estuary Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/materialization-sync-schedule/">Materialization sync schedule</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2160/reference/openmetrics-api/">OpenMetrics API</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-2160/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reference</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-2160/reference/Connectors/"><span itemprop="name">Connectors</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/"><span itemprop="name">Materialization connectors</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Apache Iceberg</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Apache Iceberg</h1></header>
<p>This connector materializes Flow collections into Iceberg tables. It
orchestrates Spark jobs running on your configured compute system to merge
updates into materialized tables as new data is available in the source
collections.</p>
<p><a href="https://ghcr.io/estuary/materialize-iceberg:dev" target="_blank" rel="noopener noreferrer"><code>ghcr.io/estuary/materialize-iceberg:dev</code></a>
provides the latest connector image. You can also follow the link in your
browser to see past image versions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>To use this connector, you'll need:</p>
<ul>
<li>An Iceberg catalog that implements the <a href="https://github.com/apache/iceberg/blob/main/open-api/rest-catalog-open-api.yaml" target="_blank" rel="noopener noreferrer">Apache Iceberg REST Catalog
API</a></li>
<li>An <a href="https://docs.aws.amazon.com/emr/latest/EMR-Serverless-UserGuide/emr-serverless.html" target="_blank" rel="noopener noreferrer">AWS EMR Serverless
Application</a>
with the Spark runtime</li>
<li>An S3 bucket for staging data files to be merged into tables</li>
<li>A dedicated IAM role for executing jobs on the EMR Serverless Application</li>
<li>An AWS IAM user for submitting jobs to the EMR Serverless Application</li>
</ul>
<p>See below for detailed descriptions of how these should be set up.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="iceberg-catalog">Iceberg Catalog<a href="#iceberg-catalog" class="hash-link" aria-label="Direct link to Iceberg Catalog" title="Direct link to Iceberg Catalog">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-aws-glue-as-an-iceberg-catalog">Using AWS Glue as an Iceberg Catalog<a href="#using-aws-glue-as-an-iceberg-catalog" class="hash-link" aria-label="Direct link to Using AWS Glue as an Iceberg Catalog" title="Direct link to Using AWS Glue as an Iceberg Catalog">​</a></h3>
<p>AWS Glue Catalogs are supported by way of the <a href="https://docs.aws.amazon.com/glue/latest/dg/connect-glu-iceberg-rest.html" target="_blank" rel="noopener noreferrer">AWS Glue Iceberg REST
endpoint</a>.</p>
<p>Note the following connector configuration details when using AWS Glue as the
catalog:</p>
<ul>
<li>The <strong>Base URL</strong> for the catalog should be
<code>https://glue.&lt;region&gt;.amazonaws.com/iceberg</code>, where <code>&lt;region&gt;</code> is the AWS
region of the catalog<!-- -->
<ul>
<li>Example: <code>https://glue.us-east-2.amazonaws.com/iceberg</code> for a Glue catalog
in <code>us-east-2</code></li>
</ul>
</li>
<li>The <strong>Warehouse</strong> is your AWS Account ID, without hyphens<!-- -->
<ul>
<li>Example: If your AWS Account ID is <code>0123-4567-8901</code>, the <strong>Warehouse</strong> is
<code>012345678901</code></li>
</ul>
</li>
<li><strong>Base Location</strong> is required. This is the base location of where table data
and metadata will be stored, by default under <code>/data</code> and <code>/metadata</code>,
respectively. It must be an S3 path starting with <code>s3://&lt;bucket&gt;</code>. For other
REST catalogs, this is an optional input</li>
<li>Use <strong>AWS SigV4 Authentication</strong> for the <strong>Catalog Authentication</strong> option,
with the <strong>Signing Name</strong> <code>glue</code>. Input the <strong>AWS Access Key ID</strong> and <strong>AWS
Secret Access Key</strong> for an AWS IAM user that has been granted sufficient
permissions to read and write metadata to the catalog. See below for an
example policy that includes the minimum required permissions to interact with
the Glue catalog and bucket containing table metadata.</li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"GlueIcebergCatalogAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:GetCatalog"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:GetDatabases"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:CreateTable"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:GetTables"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:CreateDatabase"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:UpdateTable"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:DeleteTable"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:GetTable"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:glue:&lt;region&gt;:&lt;aws-account-id&gt;:*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TableBucketAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:PutObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:GetObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:ListBucket"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:DeleteObject"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;table-bucket&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;table-bucket&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The AWS IAM user configured for the <strong>Catalog Authentication</strong> does not
necessarily need to be the same user as the one configured to access the AWS EMR
Serverless Application, but it can be. Enter the same <strong>AWS Access Key ID</strong> and
<strong>AWS Secret Access Key</strong> in both places if you are using the same user.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-glue-with-lake-formation">AWS Glue with Lake Formation<a href="#aws-glue-with-lake-formation" class="hash-link" aria-label="Direct link to AWS Glue with Lake Formation" title="Direct link to AWS Glue with Lake Formation">​</a></h4>
<p><a href="https://docs.aws.amazon.com/lake-formation/latest/dg/what-is-lake-formation.html" target="_blank" rel="noopener noreferrer">AWS Lake
Formation</a>
provides an additional layer of permissions that apply after IAM policy
permissions. If you are using AWS Lake Formation to manage access to your Glue
catalog, additional setup is required to grant the necessary access.</p>
<p>The following instructions assume Lake Formation is enabled, and that the bucket
location you are using to store Iceberg table data is a registered location in
Lake Formation. Reference the <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/lf-permissions-reference.html" target="_blank" rel="noopener noreferrer">AWS Lake Formation Developer
Guide</a>
for comprehensive instructions for adding Lake Formation permissions. Specific
permissions and sample AWS CLI commands for this connector are shown below,
where applicable.</p>
<ol>
<li>Ensure that the registered location is <em>not</em> using the default service-linked
role (<code>AWSServiceRoleForLakeFormationDataAccess</code>). You must create a <a href="https://docs.aws.amazon.com/lake-formation/latest/dg/registration-role.html" target="_blank" rel="noopener noreferrer">custom
role</a>
for registering the location. At a minimum, the role must have an inline
policy granting access to the registered bucket, as well as a trust
relationship with the <code>lakeformation.amazonaws.com</code> entity. An example inline
bucket access policy and trust policy are below:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LakeFormationRegisteredLocationBucketAccessPolicy"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:PutObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:GetObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:ListBucket"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:DeleteObject"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;table-bucket&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;table-bucket&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"LakeFormationRegisteredLocationTrustPolicy"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"Principal"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">"Service"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lakeformation.amazonaws.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sts:AssumeRole"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Give the <code>lakeformation:GetDataAccess</code> permission to the configured catalog
user, for example by attaching a policy to the user like this:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"lakeformation:GetDataAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>
<p>In the Lake Formation console, under <strong>Administration -&gt; Application
integration settings</strong>, ensure <strong>Allow external engines to access data in
Amazon S3 locations with full table access</strong> is <strong>enabled</strong> by checking the
box for it.
<img decoding="async" loading="lazy" alt="Configuring Lake Formation application integration settings" src="/pr-preview/pr-2160/assets/images/materialize-iceberg-lf-application-integration-1df0ec59d791fa32f5bdb4692b401904.png" width="1640" height="686" class="img_ev3q"></p>
</li>
<li>
<p>Grant <code>DATA_LOCATION_ACCESS</code> to the registered location for the catalog user:</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws lakeformation grant-permissions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --principal DataLakePrincipalIdentifier=&lt;catalog-user-arn&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --permissions "DATA_LOCATION_ACCESS" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource '{"DataLocation":{"CatalogId":"&lt;aws-account-id&gt;","ResourceArn":"&lt;registered-bucket-arn&gt;"}}'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Grant <code>CREATE_DATABASE</code> on the catalog for the catalog user:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws lakeformation grant-permissions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --principal DataLakePrincipalIdentifier=&lt;catalog-user-arn&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --permissions "CREATE_DATABASE" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource '{ "Catalog": {"Id": "&lt;aws-account-id&gt;"} }'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="6">
<li>Grant <code>ALL</code> access to tables within any pre-existing databases that will
contain materialized tables to the catalog user. Databases the connector
creates will automatically have the necessary permissions for the catalog
user. Run this command for each pre-existing database that matches a
namespace of a binding configured in the materialization:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws lakeformation grant-permissions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --principal DataLakePrincipalIdentifier=&lt;catalog-user-arn&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --permissions "ALL" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource '{ "Table": {"DatabaseName":"&lt;database-name&gt;", "TableWildcard":{}}}'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="7">
<li>Grant <code>ALL</code> access to <em>all</em> databases that will contain materialized tables
to the EMR Execution Role. You may need to do this step after the connector
has automatically created the databases for the role to have the required
access. Run this command for each database:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">aws lakeformation grant-permissions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --principal DataLakePrincipalIdentifier=&lt;emr-execution-role-arn&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --permissions "ALL" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --resource '{ "Table": {"DatabaseName":"&lt;database-name&gt;", "TableWildcard":{}}}'</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you have enabled
<a href="/pr-preview/pr-2160/concepts/materialization/#using-sourcecapture-to-synchronize-capture-and-materialization-bindings">sourceCapture</a>
for your materialization and a new binding is added with a new namespace, you
will need the repeat step 7 to grant access to that database to the EMR
execution role.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="s3-table-buckets">S3 Table Buckets<a href="#s3-table-buckets" class="hash-link" aria-label="Direct link to S3 Table Buckets" title="Direct link to S3 Table Buckets">​</a></h3>
<p>You can materialize to S3 table buckets using the <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-tables-integrating-glue-endpoint.html" target="_blank" rel="noopener noreferrer">AWS Glue Iceberg Rest
Endpoint</a>
if your S3 tables are integrated with the Glue data catalog, or directly using
the <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-tables-integrating-open-source.html" target="_blank" rel="noopener noreferrer">S3 Tables Iceberg REST
Endpoint</a>.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>If you plan to query your S3 table buckets using AWS analytics services such as
Amazon Athena, all table column names must be lowercase. You should enable the
advanced option "Lowercase Column Names" in the materialization configuration if
your source collection has fields with capital letters in their names to ensure
all columns are created as lowercase.</p></div></div>
<p>To configure the materialization to connect directly to the S3 Tables Iceberg REST Endpoint:</p>
<ul>
<li>The <strong>Base URL</strong> for the catalog should be
<code>https://s3tables.&lt;region&gt;.amazonaws.com/iceberg</code>, where <code>&lt;region&gt;</code> is the AWS
region of the bucket</li>
<li>The <strong>Warehouse</strong> is the table bucket ARN, in the form of
<code>arn:aws:s3tables:&lt;region&gt;:&lt;accountID&gt;:bucket/&lt;bucketname&gt;</code></li>
<li>Use <strong>AWS SigV4 Authentication</strong> for the <strong>Catalog Authentication</strong> option,
with the <strong>Signing Name</strong> <code>s3tables</code>. Input the <strong>AWS Access Key ID</strong> and
<strong>AWS Secret Access Key</strong> for an AWS IAM user that has been granted sufficient
permissions to read and write to the bucket.</li>
<li>Your <strong>EMR Execution Role</strong> must also have been granted sufficient permissions
to read and write to the bucket. See below for an example policy with the
necessary permission for both the AWS IAM user and the execution role</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Version": "2012-10-17",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "Statement": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "Sid": "S3TablesAccess",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "Effect": "Allow",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "Action": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:GetTableBucket",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:ListNamespaces",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:CreateNamespace",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:ListTables",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:CreateTable",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:PutTableData",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:GetTableData",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:UpdateTableMetadataLocation",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:GetTableMetadataLocation",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "s3tables:DeleteTable"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            "Resource": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "arn:aws:s3tables:&lt;region&gt;:&lt;aws-account-id&gt;:bucket/&lt;bucket&gt;",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                "arn:aws:s3tables:&lt;region&gt;:&lt;aws-account-id&gt;:bucket/&lt;bucket&gt;/*"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-other-rest-catalogs">Using Other REST Catalogs<a href="#using-other-rest-catalogs" class="hash-link" aria-label="Direct link to Using Other REST Catalogs" title="Direct link to Using Other REST Catalogs">​</a></h3>
<p>Configuration for REST catalogs other than AWS Glue will depend on the specific
catalog. These catalogs should use <strong>OAuth 2.0 Client Credentials</strong> for the
<strong>Catalog Authentication</strong> configuration.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Beta</div><div class="admonitionContent_BuS1"><p>Currently only REST catalogs that use Amazon S3 for external cloud storage are
supported. Support for catalogs backed by GCP or Azure is planned.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-snowflake-open-catalog">Example: Snowflake Open Catalog<a href="#example-snowflake-open-catalog" class="hash-link" aria-label="Direct link to Example: Snowflake Open Catalog" title="Direct link to Example: Snowflake Open Catalog">​</a></h4>
<p><a href="https://www.snowflake.com/en/product/features/open-catalog/" target="_blank" rel="noopener noreferrer">Snowflake Open
Catalog</a> is a
managed Iceberg REST catalog service. Refer to the
<a href="https://other-docs.snowflake.com/en/opencatalog/overview" target="_blank" rel="noopener noreferrer">docs</a> for detailed
information on how to set it up. These are the high-level steps that must be
completed:</p>
<ul>
<li>Create external cloud storage for the catalog. This is where table data and
metadata files are stored</li>
<li>Create the catalog and permissions for Snowflake Open Catalog to access your
cloud storage</li>
<li>Create a <strong>Role</strong> for the catalog, and grant it these permissions:<!-- -->
<ul>
<li><strong>CATALOG_MANAGE_CONTENT</strong></li>
<li><strong>CATALOG_MANAGE_METADATA</strong></li>
<li><strong>CATALOG_READ_PROPERTIES</strong></li>
<li><strong>CATALOG_WRITE_PROPERTIES</strong></li>
<li><strong>NAMESPACE_CREATE</strong></li>
<li><strong>NAMESPACE_FULL_METADATA</strong></li>
<li><strong>NAMESPACE_LIST</strong></li>
<li><strong>NAMESPACE_READ_PROPERTIES</strong></li>
<li><strong>NAMESPACE_WRITE_PROPERTIES</strong></li>
<li><strong>TABLE_CREATE</strong></li>
<li><strong>TABLE_DROP</strong></li>
<li><strong>TABLE_FULL_METADATA</strong></li>
<li><strong>TABLE_LIST</strong></li>
<li><strong>TABLE_READ_DATA</strong></li>
<li><strong>TABLE_READ_PROPERTIES</strong></li>
<li><strong>TABLE_WRITE_DATA</strong></li>
<li><strong>TABLE_WRITE_PROPERTIES</strong></li>
</ul>
</li>
<li>Create a <strong>Service Connection</strong> and <strong>Principal Role</strong>. When creating the
service connection, the input for <strong>Query Engine</strong> can be left blank, or set
to anything you want. Copy the <strong>Client ID</strong> and <strong>Client Secret</strong> when they
are shown to you. You will need this credential when setting up the
materialization's <strong>Catalog Credential</strong>, as <code>&lt;client id&gt;:&lt;client secret&gt;</code></li>
<li>Grant the <strong>Role</strong> you created in the catalog to the <strong>Principal Role</strong> you
just created</li>
</ul>
<p>Now you can configure the materialization:</p>
<ul>
<li>The <strong>Base URL</strong> should be <code>https://&lt;open_catalog_account_identifier&gt;.snowflakecomputing.com/polaris/api/catalog</code></li>
<li>For <strong>Warehouse</strong>, use the name of the Snowflake Open Catalog.</li>
<li>Enter any <strong>Namespace</strong> you desire. It will be created if it does not already
exist</li>
<li><strong>Base Location</strong> can be left blank to use the default base location you
specified when creating the Snowflake Open Catalog</li>
<li>For <strong>Catalog Authentication</strong>, select <strong>OAuth 2.0 Client Credentials</strong>:<!-- -->
<ul>
<li>Use the default <code>v1/oauth/tokens</code> for <code>OAuth 2.0 Server URI</code></li>
<li>Input the <strong>Catalog Credential</strong> you copied when creating the <strong>Service
Connection</strong></li>
<li>Set the <strong>Scope</strong> as <code>PRINCIPAL_ROLE:&lt;your_principal&gt;</code>, where
<code>&lt;your_principal&gt;</code> is the name of the <strong>Principal Role</strong> you created when
creating the <strong>Service Connection</strong></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can specify the <code>&lt;open_catalog_account_identifier&gt;</code> in the <strong>Base URL</strong>
above as <code>&lt;account name&gt;.&lt;cloud region&gt;.&lt;cloud provider&gt;</code>. See the
<a href="https://other-docs.snowflake.com/en/opencatalog/find-account-name" target="_blank" rel="noopener noreferrer">docs</a> for
how to find your account name. The <code>cloud region</code> and <code>cloud provider</code> are for
the Snowflake Open Catalog, and are found in the same place as the account name.
For example, if your account name is <code>ab12345</code> on <code>us-east-2.aws</code>, your <strong>Base
URL</strong> will be
<code>https://ab12345.us-east-2.aws.snowflakecomputing.com/polaris/api/catalog</code>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-emr-serverless-application-configuration">AWS EMR Serverless Application Configuration<a href="#aws-emr-serverless-application-configuration" class="hash-link" aria-label="Direct link to AWS EMR Serverless Application Configuration" title="Direct link to AWS EMR Serverless Application Configuration">​</a></h2>
<p>To use <a href="https://docs.aws.amazon.com/emr/latest/EMR-Serverless-UserGuide/emr-serverless.html" target="_blank" rel="noopener noreferrer">AWS EMR
Serverless</a>
for compute, a few different AWS items must be set up to work together:</p>
<ul>
<li>The connector submits jobs to the <strong>AWS EMR Serverless Application</strong> and
monitors their progress</li>
<li>Catalog credentials are stored securely in <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html" target="_blank" rel="noopener noreferrer">AWS Systems Manager Parameter
Store</a>,
managed by the connector, and read by EMR jobs to connect to the catalog</li>
<li>Data to merge into tables is staged in an S3 bucket and read by EMR jobs</li>
<li>EMR jobs are run using an IAM role with a specific <strong>Execution Role ARN</strong></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-aws-emr-serverless-application">Create the AWS EMR Serverless Application<a href="#create-the-aws-emr-serverless-application" class="hash-link" aria-label="Direct link to Create the AWS EMR Serverless Application" title="Direct link to Create the AWS EMR Serverless Application">​</a></h3>
<p>General documentation for creating a new AWS EMR Serverless Application is
available
<a href="https://docs.aws.amazon.com/emr/latest/EMR-Serverless-UserGuide/gs-console.html#gs-application-console" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Note the following specific details when creating the application to use with
this connector:</p>
<ul>
<li>Select <strong>Spark</strong> for the <strong>Type</strong>.</li>
<li>Use <strong>emr-7.7.0</strong> for the <strong>Release Version</strong>, and <strong>x86_64</strong> for the
<strong>Architecture</strong></li>
<li>For <strong>Application setup options</strong>, select <strong>Use custom settings</strong>. These options
can generally be configured as desired, with the specific notes below:<!-- -->
<ul>
<li><strong>Pre-initialized capacity</strong> is not required, but may help reduce latency for
streaming updates</li>
<li>In <strong>Additional configurations</strong> there is an option for <strong>Use AWS Glue Data
Catalog as metastore</strong>. This is not required, even if you are using AWS Glue
as your Iceberg catalog</li>
<li>Make sure <strong>Automatically start application on job submission</strong> is enabled
under <strong>Application behavior</strong>. Enabling <strong>Automatically stop after
application is idle for</strong> is recommended to stop any pre-initialized capacity
during periods of low data volume</li>
<li>In <strong>Network connections</strong>, you must configure <strong>Virtual private cloud
(VPC)</strong>, <strong>Subnets</strong>, and <strong>Security groups</strong>  to enable REST API calls to
your Iceberg catalog. The subnets must have a route to an Internet Gateway,
and the security group must allow outbound traffic. See the <a href="https://docs.aws.amazon.com/emr/latest/EMR-Serverless-UserGuide/vpc-access.html" target="_blank" rel="noopener noreferrer">AWS
docs</a>
for setting up VPC access for EMR Serverless applications</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-parameter-store">Configure Parameter Store<a href="#configure-parameter-store" class="hash-link" aria-label="Direct link to Configure Parameter Store" title="Direct link to Configure Parameter Store">​</a></h3>
<p>AWS Systems Manager Parameter Store requires minimal additional configuration.
Catalog credentials are stored encrypted in parameter store by the connector,
and retrieved by EMR Serverless jobs to connect to your catalog.</p>
<p>Parameter Store is only used with <strong>OAuth 2.0 Client Credentials</strong>. If you are
using AWS Glue as your catalog, the <strong>Systems Manager Prefix</strong> can be left
blank, since the EMR execution role will have permissions to read from the
catalog associated with it directly. The <strong>Systems Manager Prefix</strong> is a
hierarchical location where the connector will store encrypted credentials. For
example, you may input <code>/estuary/</code> as the prefix - note the leading a trailing
slashes are required.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-staging-bucket">Create Staging Bucket<a href="#create-staging-bucket" class="hash-link" aria-label="Direct link to Create Staging Bucket" title="Direct link to Create Staging Bucket">​</a></h3>
<p>Data to merge into Iceberg tables is staged in an S3 bucket under the optional
<strong>Bucket Path</strong> prefix by the connector. Additional connector metadata is stored
in the staging bucket under the <code>flow_metadata_v1</code> prefix. The staging bucket
must be in the same region as the EMR application.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-iam-role-for-emr-execution">Create IAM Role for EMR Execution<a href="#create-iam-role-for-emr-execution" class="hash-link" aria-label="Direct link to Create IAM Role for EMR Execution" title="Direct link to Create IAM Role for EMR Execution">​</a></h3>
<p>This role must have sufficient permissions to read credentials from Systems
Manager (unless you are using Glue), and access data in the staging bucket. If
you are using AWS Glue as the catalog, this role must also have permissions to
access the catalog.</p>
<p>See the <a href="https://docs.aws.amazon.com/emr/latest/EMR-Serverless-UserGuide/getting-started.html#gs-runtime-role" target="_blank" rel="noopener noreferrer">AWS
docs</a>
for information on how to create the role.</p>
<p>You must include this <strong>Custom trust policy</strong> for the role type when creating
the role in order for jobs submitted to the application to access other AWS
services on behalf of the IAM user:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Principal"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"Service"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"emr-serverless.amazonaws.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sts:AssumeRole"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See below for an example policy with the required permissions to attach to the
execution role if you are using a standard REST catalog:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"StagingBucketAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:PutObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:GetObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:ListBucket"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:DeleteObject"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;staging-bucket&gt;/&lt;optional-bucket-path&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;staging-bucket&gt;/&lt;optional-bucket-path&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ParameterStoreAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"ssm:GetParameter"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"arn:aws:ssm:&lt;region&gt;:&lt;aws-account-id&gt;:parameter/&lt;systems-manager-prefix&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you are using a Glue catalog, Parameter Store access is not required, but
access to the Glue catalog is, as well as access to the bucket where Glue stores
the table files:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"StagingBucketAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:PutObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:GetObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:ListBucket"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:DeleteObject"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;staging-bucket&gt;/&lt;optional-bucket-path&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;staging-bucket&gt;/&lt;optional-bucket-path&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TableBucketAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:PutObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:GetObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:ListBucket"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:DeleteObject"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;table-bucket&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;table-bucket&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"GlueCatalogTableModification"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:GetTable"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"glue:UpdateTable"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:glue:&lt;region&gt;:&lt;aws-account-id&gt;:*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-iam-user-for-compute-configuration">Create IAM User for Compute Configuration<a href="#create-iam-user-for-compute-configuration" class="hash-link" aria-label="Direct link to Create IAM User for Compute Configuration" title="Direct link to Create IAM User for Compute Configuration">​</a></h3>
<p>The <strong>AWS Access Key ID</strong> and <strong>AWS Secret Access Key</strong> set in the <strong>AWS EMR
Serverless</strong> configuration must be for an IAM user with permissions to manage
jobs for the EMR Serverless Application and read and write data to the staging
bucket. If you are using AWS Glue as the catalog, parameter store permissions
are not required.</p>
<p>See below for an example policy with these permissions:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Version"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2012-10-17"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"Statement"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"StagingBucketAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:PutObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:GetObject"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:ListBucket"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"s3:DeleteObject"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;staging-bucket&gt;/&lt;optional-bucket-path&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:s3:::&lt;staging-bucket&gt;/&lt;optional-bucket-path&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"iam:PassRole"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"&lt;emr-execution-role-arn&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Condition"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">"StringEquals"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">"iam:PassedToService"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"emr-serverless.amazonaws.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"EMRServerlessActions"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:ListApplications"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:GetApplication"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:StartApplication"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:StartJobRun"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:CancelJobRun"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:ListJobRuns"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"emr-serverless:GetJobRun"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:emr-serverless:&lt;region&gt;:&lt;aws-account-id&gt;:/applications/&lt;emr-application-id&gt;"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"arn:aws:emr-serverless:&lt;region&gt;:&lt;aws-account-id&gt;:/applications/&lt;emr-application-id&gt;/jobruns/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Sid"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"ParameterStoreAccess"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Effect"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Allow"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Action"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"ssm:PutParameter"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">"ssm:GetParameter"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">"Resource"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"arn:aws:ssm:&lt;region&gt;:&lt;aws-account-id&gt;:parameter/&lt;systems-manager-prefix&gt;/*"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>See below for a full list of configuration options.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="endpoint">Endpoint<a href="#endpoint" class="hash-link" aria-label="Direct link to Endpoint" title="Direct link to Endpoint">​</a></h4>
<table><thead><tr><th>Property</th><th>Title</th><th>Description</th><th>Type</th><th>Required/Default</th></tr></thead><tbody><tr><td><strong><code>/url</code></strong></td><td>URL</td><td>Base URL for the catalog.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/warehouse</code></strong></td><td>Warehouse</td><td>Warehouse to connect to. For AWS Glue, this is the account ID.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/namespace</code></strong></td><td>Namespace</td><td>Namespace for bound collection tables (unless overridden within the binding resource configuration).</td><td>string</td><td>Required (Pattern: <code>^[^.]*$</code>)</td></tr><tr><td><code>/base_location</code></td><td>Base Location</td><td>Base location for catalog tables. Required if using AWS Glue. Example: <code>s3://your_bucket/your_prefix/</code>.</td><td>string</td><td></td></tr><tr><td><code>/hard_delete</code></td><td>Hard Delete</td><td>If enabled, items deleted in the source will also be deleted from the destination. Disabled by default (soft-delete).</td><td>boolean</td><td></td></tr><tr><td><strong><code>/catalog_authentication</code></strong></td><td>Catalog Authentication</td><td>Authentication method for the catalog. Supports OAuth 2.0 Client Credentials or AWS SigV4.</td><td>object</td><td></td></tr><tr><td><strong><code>/catalog_authentication/oauth2_server_uri</code></strong></td><td>OAuth 2.0 Server URI</td><td>OAuth 2.0 server URI for requesting access tokens. Usually 'v1/oauth/tokens'.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/catalog_authentication/credential</code></strong></td><td>Catalog Credential</td><td>Credential for connecting to the REST catalog. Format: <code>&lt;client_id&gt;:&lt;client_secret&gt;</code> for OAuth, <code>&lt;token&gt;</code> for Bearer authentication.</td><td>string</td><td>Required</td></tr><tr><td><code>/catalog_authentication/scope</code></td><td>Scope</td><td>Authorization scope for OAuth client credentials. Example: <code>PRINCIPAL_ROLE:your_principal</code>.</td><td>string</td><td></td></tr><tr><td><strong><code>/catalog_authentication/aws_access_key_id</code></strong></td><td>AWS Access Key ID</td><td>Access Key ID for AWS SigV4 authentication.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/catalog_authentication/aws_secret_access_key</code></strong></td><td>AWS Secret Access Key</td><td>Secret Access Key for AWS SigV4 authentication.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/catalog_authentication/region</code></strong></td><td>Region</td><td>AWS region for authentication.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/catalog_authentication/signing_name</code></strong></td><td>Signing Name</td><td>Signing Name for SigV4 authentication.</td><td>string</td><td>Required (<code>glue</code> or <code>s3tables</code>)</td></tr><tr><td><strong><code>/compute</code></strong></td><td>Compute</td><td>Compute backend for processing. Supports AWS EMR Serverless.</td><td>object</td><td>Required</td></tr><tr><td><strong><code>/compute/aws_access_key_id</code></strong></td><td>AWS Access Key ID</td><td>Access Key ID for authenticating with EMR and writing to the staging bucket.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/compute/aws_secret_access_key</code></strong></td><td>AWS Secret Access Key</td><td>Secret Access Key for authenticating with EMR and writing to the staging bucket.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/compute/region</code></strong></td><td>Region</td><td>Region of the EMR application and staging bucket.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/compute/application_id</code></strong></td><td>Application ID</td><td>ID of the EMR serverless application.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/compute/execution_role_arn</code></strong></td><td>Execution Role ARN</td><td>ARN of the EMR serverless execution role used to run jobs.</td><td>string</td><td>Required</td></tr><tr><td><strong><code>/compute/bucket</code></strong></td><td>Bucket</td><td>Bucket to store staged data files.</td><td>string</td><td>Required</td></tr><tr><td><code>/compute/bucket_path</code></td><td>Bucket Path</td><td>Optional prefix used to store staged data files.</td><td>string</td><td></td></tr><tr><td><code>/compute/systems_manager_prefix</code></td><td>System Manager Prefix</td><td>Prefix for parameters in Systems Manager as an absolute directory path (must start and end with <code>/</code>).</td><td>string</td><td><code>/estuary/</code></td></tr><tr><td><code>/advanced/lowercase_column_names</code></td><td>Lowercase Column Names</td><td>Create all columns with lowercase names.</td><td>boolean</td><td></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bindings">Bindings<a href="#bindings" class="hash-link" aria-label="Direct link to Bindings" title="Direct link to Bindings">​</a></h4>
<table><thead><tr><th>Property</th><th>Title</th><th>Description</th><th>Type</th><th>Required/Default</th></tr></thead><tbody><tr><td><strong><code>/table</code></strong></td><td>Table</td><td>Table name</td><td>string</td><td>Required</td></tr><tr><td><code>/namespace</code></td><td>Alternative Namespace</td><td>Alternative namespace for this table</td><td>string</td><td></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sync-schedule">Sync Schedule<a href="#sync-schedule" class="hash-link" aria-label="Direct link to Sync Schedule" title="Direct link to Sync Schedule">​</a></h2>
<p>This connector supports configuring a schedule for sync frequency. You can read
about how to configure this <a href="/pr-preview/pr-2160/reference/materialization-sync-schedule/">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="iceberg-column-types">Iceberg Column Types<a href="#iceberg-column-types" class="hash-link" aria-label="Direct link to Iceberg Column Types" title="Direct link to Iceberg Column Types">​</a></h2>
<p>Flow collection fields are written to Iceberg table columns based on the data type of the field.
Iceberg <a href="https://iceberg.apache.org/spec/#primitive-types" target="_blank" rel="noopener noreferrer">V2 primitive type</a> columns are created
for these Flow collection fields:</p>
<table><thead><tr><th>Collection Field Data Type</th><th>Iceberg Column Type</th></tr></thead><tbody><tr><td><strong>array</strong></td><td><strong>string</strong></td></tr><tr><td><strong>object</strong></td><td><strong>string</strong></td></tr><tr><td><strong>boolean</strong></td><td><strong>boolean</strong></td></tr><tr><td><strong>integer</strong></td><td><strong>long</strong></td></tr><tr><td><strong>number</strong></td><td><strong>double</strong></td></tr><tr><td><strong>string</strong> with <code>{contentEncoding: base64}</code></td><td><strong>binary</strong></td></tr><tr><td><strong>string</strong> with <code>{format: date-time}</code></td><td><strong>timestamptz</strong> (with microsecond precision)</td></tr><tr><td><strong>string</strong> with <code>{format: date}</code></td><td><strong>date</strong></td></tr><tr><td><strong>string</strong> with <code>{format: integer}</code></td><td><strong>long</strong></td></tr><tr><td><strong>string</strong> with <code>{format: number}</code></td><td><strong>double</strong></td></tr><tr><td><strong>string</strong> (all others)</td><td><strong>string</strong></td></tr></tbody></table>
<p>Flow collection fields with <code>{type: string, format: time}</code> and <code>{type: string, format: uuid}</code> are
materialized as <strong>string</strong> columns rather than <strong>time</strong> and <strong>uuid</strong> columns for compatibility with
Apache Spark. <strong><a href="https://iceberg.apache.org/spec/#nested-types" target="_blank" rel="noopener noreferrer">Nested types</a></strong> are not currently
supported.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-maintenance">Table Maintenance<a href="#table-maintenance" class="hash-link" aria-label="Direct link to Table Maintenance" title="Direct link to Table Maintenance">​</a></h2>
<p>To ensure optimal query performance, you should conduct <a href="https://iceberg.apache.org/docs/latest/maintenance/" target="_blank" rel="noopener noreferrer">regular
maintenance</a> for your materialized tables since
the connector will not perform this maintenance automatically (support for automatic table
maintenance is planned).</p>
<p>If you're using the AWS Glue catalog, you can enable automatic data file compaction by following
<a href="https://docs.aws.amazon.com/lake-formation/latest/dg/data-compaction.html" target="_blank" rel="noopener noreferrer">this guide</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/estuary/flow/edit/master/site/docs/reference/Connectors/materialization-connectors/apache-iceberg.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/amazon-s3-parquet/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Apache Parquet Files in Amazon S3</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-2160/reference/Connectors/materialization-connectors/apache-kafka/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Apache Kafka</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#iceberg-catalog" class="table-of-contents__link toc-highlight">Iceberg Catalog</a><ul><li><a href="#using-aws-glue-as-an-iceberg-catalog" class="table-of-contents__link toc-highlight">Using AWS Glue as an Iceberg Catalog</a></li><li><a href="#s3-table-buckets" class="table-of-contents__link toc-highlight">S3 Table Buckets</a></li><li><a href="#using-other-rest-catalogs" class="table-of-contents__link toc-highlight">Using Other REST Catalogs</a></li></ul></li><li><a href="#aws-emr-serverless-application-configuration" class="table-of-contents__link toc-highlight">AWS EMR Serverless Application Configuration</a><ul><li><a href="#create-the-aws-emr-serverless-application" class="table-of-contents__link toc-highlight">Create the AWS EMR Serverless Application</a></li><li><a href="#configure-parameter-store" class="table-of-contents__link toc-highlight">Configure Parameter Store</a></li><li><a href="#create-staging-bucket" class="table-of-contents__link toc-highlight">Create Staging Bucket</a></li><li><a href="#create-iam-role-for-emr-execution" class="table-of-contents__link toc-highlight">Create IAM Role for EMR Execution</a></li><li><a href="#create-iam-user-for-compute-configuration" class="table-of-contents__link toc-highlight">Create IAM User for Compute Configuration</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li></ul></li><li><a href="#sync-schedule" class="table-of-contents__link toc-highlight">Sync Schedule</a></li><li><a href="#iceberg-column-types" class="table-of-contents__link toc-highlight">Iceberg Column Types</a></li><li><a href="#table-maintenance" class="table-of-contents__link toc-highlight">Table Maintenance</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/pr-preview/pr-2160/">Flow Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://go.estuary.dev/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/EstuaryDev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@estuarydev" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Estuary Technologies, Inc. Built with Docusaurus.</div></div></div></footer></div>

</body></html>