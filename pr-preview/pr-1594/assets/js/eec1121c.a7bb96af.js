"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2472],{10604:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>l,toc:()=>a});var r=s(74848),t=s(28453);const c={},i="OracleDB (Flashback)",l={id:"reference/Connectors/capture-connectors/OracleDB/flashback",title:"OracleDB (Flashback)",description:"This connector captures data from OracleDB into Flow collections using Oracle Flashback.",source:"@site/docs/reference/Connectors/capture-connectors/OracleDB/flashback.md",sourceDirName:"reference/Connectors/capture-connectors/OracleDB",slug:"/reference/Connectors/capture-connectors/OracleDB/flashback",permalink:"/pr-preview/pr-1594/reference/Connectors/capture-connectors/OracleDB/flashback",draft:!1,unlisted:!1,editUrl:"https://github.com/estuary/flow/edit/master/site/docs/reference/Connectors/capture-connectors/OracleDB/flashback.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"OracleDB",permalink:"/pr-preview/pr-1594/reference/Connectors/capture-connectors/OracleDB/"},next:{title:"Paypal Transaction",permalink:"/pr-preview/pr-1594/reference/Connectors/capture-connectors/paypal-transaction"}},d={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup",id:"setup",level:2},{value:"Create a Dedicated User",id:"create-a-dedicated-user",level:3},{value:"Include Schemas for Discovery",id:"include-schemas-for-discovery",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Properties",id:"properties",level:3},{value:"Endpoint",id:"endpoint",level:4},{value:"Bindings",id:"bindings",level:4},{value:"Sample",id:"sample",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"oracledb-flashback",children:"OracleDB (Flashback)"}),"\n",(0,r.jsxs)(n.p,{children:["This connector captures data from OracleDB into Flow collections using ",(0,r.jsx)(n.a,{href:"https://www.oracle.com/database/technologies/flashback/",children:"Oracle Flashback"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["It is available for use in the Flow web application. For local development or open-source workflows, ghcr.io/estuary/source-oracle-flashback",":dev"," provides the latest version of the connector as a Docker image. You can also follow the link in your browser to see past image versions."]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Oracle 11g or above"}),"\n",(0,r.jsx)(n.li,{children:"Allow connections from Estuary Flow to your Oracle database (if they exist in separate VPCs)"}),"\n",(0,r.jsx)(n.li,{children:"Create a dedicated read-only Estuary Flow user with access to all tables needed for replication"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps below to set up the OracleDB connector."}),"\n",(0,r.jsx)(n.h3,{id:"create-a-dedicated-user",children:"Create a Dedicated User"}),"\n",(0,r.jsx)(n.p,{children:"Creating a dedicated database user with read-only access is recommended for better permission control and auditing."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"To create the user, run the following commands against your database:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"CREATE USER estuary_flow_user IDENTIFIED BY <your_password_here>;\nGRANT CREATE SESSION TO estuary_flow_user;\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Next, grant the user read-only access to the relevant tables. The simplest way is to grant read access to all tables in the schema as follows:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"GRANT SELECT ANY TABLE TO estuary_flow_user;\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Alternatively, you can be more granular and grant access to specific tables in different schemas:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:'GRANT SELECT ON "<schema_a>"."<table_1>" TO estuary_flow_user;\nGRANT SELECT ON "<schema_b>"."<table_2>" TO estuary_flow_user;\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsx)(n.li,{children:"Finally you need to grant the user access to read metadata from the database:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"GRANT SELECT_CATALOG_ROLE TO estuary_flow_user;\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"5",children:["\n",(0,r.jsx)(n.li,{children:"Your database user should now be ready for use with Estuary Flow."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"include-schemas-for-discovery",children:"Include Schemas for Discovery"}),"\n",(0,r.jsx)(n.p,{children:"In your Oracle configuration, you can specify the schemas that Flow should look at when discovering tables. The schema names are case-sensitive and will default to the upper-cased user if empty. If the user does not have access to the configured schemas, no tables will be discovered."}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["You configure connectors either in the Flow web app, or by directly editing the catalog specification file. See ",(0,r.jsx)(n.a,{href:"https://docs.estuary.dev/concepts/connectors/#using-connectors",children:"connectors"})," to learn more about using connectors. The values and specification sample below provide configuration details specific to the OracleDB Flashback source connector."]}),"\n",(0,r.jsx)(n.p,{children:"To allow secure connections via SSH tunneling:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Follow the guide to ",(0,r.jsx)(n.a,{href:"/guides/connect-network/",children:"configure an SSH server for tunneling"})]}),"\n",(0,r.jsxs)(n.li,{children:["When you configure your connector as described in the ",(0,r.jsx)(n.a,{href:"#configuration",children:"configuration"})," section above, including the additional ",(0,r.jsx)(n.code,{children:"networkTunnel"})," configuration to enable the SSH tunnel. See ",(0,r.jsx)(n.a,{href:"/pr-preview/pr-1594/concepts/connectors#connecting-to-endpoints-on-secure-networks",children:"Connecting to endpoints on secure networks"})," for additional details and a sample."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(n.h4,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Title"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required/Default"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/address"})}),(0,r.jsx)(n.td,{children:"Address"}),(0,r.jsxs)(n.td,{children:["The connection string for connecting to the database, either in the format of host",":port","/SID or a connect descriptor such as (address=(protocol=tcps)(host=...)...)"]}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials"})}),(0,r.jsx)(n.td,{children:"Credentials"}),(0,r.jsx)(n.td,{children:"Credentials for authenticating with the database. Wallet and Username & Password authentication are supported."}),(0,r.jsx)(n.td,{children:"object"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials/credentials_title"})}),(0,r.jsx)(n.td,{children:"Credentials Title"}),(0,r.jsx)(n.td,{children:'Authentication method to use, one of "Wallet" or "Username & Password"'}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials/username"})}),(0,r.jsx)(n.td,{children:"Username"}),(0,r.jsx)(n.td,{children:"The username which is used to access the database."}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials/password"})}),(0,r.jsx)(n.td,{children:"Password"}),(0,r.jsx)(n.td,{children:"The password associated with the username."}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials/tnsnames"})}),(0,r.jsx)(n.td,{children:"tnsnames"}),(0,r.jsx)(n.td,{children:"The tnsnames.ora file from the wallet."}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials/ewallet"})}),(0,r.jsx)(n.td,{children:"ewallet"}),(0,r.jsx)(n.td,{children:"The ewallet.pem file from the wallet."}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/credentials/wallet_password"})}),(0,r.jsx)(n.td,{children:"Wallet Password"}),(0,r.jsx)(n.td,{children:"Password of the wallet, if protected."}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/advanced/backfill_chunk_size"})}),(0,r.jsx)(n.td,{children:"Backfill Chunk Size"}),(0,r.jsx)(n.td,{children:"The number of rows which should be fetched from the database in a single backfill query."}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"50000"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/advanced/skip_flashback_retention_checks"})}),(0,r.jsx)(n.td,{children:"Skip Flashback Retention Checks"}),(0,r.jsx)(n.td,{children:"Skip Flashback retention checks. Use this cautiously as we cannot guarantee consistency if Flashback retention is not sufficient."}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/advanced/default_interval"})}),(0,r.jsx)(n.td,{children:"Default Interval"}),(0,r.jsx)(n.td,{children:"Default interval between updates for all resources. Can be overwritten by each resource."}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PT5M"})})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"bindings",children:"Bindings"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Title"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required/Default"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"/name"})})}),(0,r.jsx)(n.td,{children:"Name"}),(0,r.jsx)(n.td,{children:"The table name"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"/schema"})})}),(0,r.jsx)(n.td,{children:"Schema"}),(0,r.jsx)(n.td,{children:"In Oracle tables reside in a schema that points to the user that owns the table."}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"/interval"})})}),(0,r.jsx)(n.td,{children:"Interval"}),(0,r.jsx)(n.td,{children:"Interval between updates for this resource"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"PT5M"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"sample",children:"Sample"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'captures:\n  ${PREFIX}/${CAPTURE_NAME}:\n    endpoint:\n      connector:\n        image: ghcr.io/estuary/source-oracle-flashback:dev\n        config:\n          address: "database-1.ukqdmzdqvvsz.us-east-2.rds.amazonaws.com:1521/ORCL"\n          user: "flow_capture"\n          credentials:\n            credentials_title: Username & Password\n            username: ADMIN\n            password: secret\n          networkTunnel:\n            sshForwarding:\n              privateKey: -----BEGIN RSA PRIVATE KEY-----\\n...\n              sshEndpoint: ssh://ec2-user@19.220.21.33:22\n          \n    bindings:\n      - resource:\n          name: ${TABLE_NAME}\n          schema: ${TABLE_NAMESPACE}\n          interval: PT5M\n        target: ${PREFIX}/${COLLECTION_NAME}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var r=s(96540);const t={},c=r.createContext(t);function i(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);