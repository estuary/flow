<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/flowctl" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">flowctl | Estuary Flow Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.estuary.dev/pr-preview/pr-2178/img/estuary-new.png"><meta data-rh="true" name="twitter:image" content="https://docs.estuary.dev/pr-preview/pr-2178/img/estuary-new.png"><meta data-rh="true" property="og:url" content="https://docs.estuary.dev/pr-preview/pr-2178/concepts/flowctl/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="flowctl | Estuary Flow Documentation"><meta data-rh="true" name="description" content="There are two ways to work with Flow: through the web app, and using the flowctl command-line interface."><meta data-rh="true" property="og:description" content="There are two ways to work with Flow: through the web app, and using the flowctl command-line interface."><link data-rh="true" rel="icon" href="/pr-preview/pr-2178/img/favicon-2.ico"><link data-rh="true" rel="canonical" href="https://docs.estuary.dev/pr-preview/pr-2178/concepts/flowctl/"><link data-rh="true" rel="alternate" href="https://docs.estuary.dev/pr-preview/pr-2178/concepts/flowctl/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.estuary.dev/pr-preview/pr-2178/concepts/flowctl/" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-WK8SB2L",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>
<script id="ai-widget-script" async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="349e5b72-3e5a-4c19-8b7a-27c7b90caa0f" data-project-name="Estuary" data-modal-title="Estuary AI Assistant" data-project-color="#5072EB" data-button-text-color="#F2F2F2" data-project-logo="https://docs.estuary.dev/img/estuary-new.png" data-modal-example-questions-title="Try asking me..." data-modal-disclaimer="This AI assistant answers questions using Estuary&#39;s [documentation](https://docs.estuary.dev/), [blogs](https://estuary.dev/blog/), and additional resources. If you can&#39;t find your answer, join us on [Slack](https://go.estuary.dev/slack)." data-modal-example-questions="How does CDC work in Estuary?,How can I deploy to a private cloud?,How do I connect to PostgreSQL?,Is Estuary Flow scalable?" data-uncertain-answer-callout="I may not have all of the information on that topic. I bet someone can answer it in [Slack](https://go.estuary.dev/slack)."></script><link rel="stylesheet" href="/pr-preview/pr-2178/assets/css/styles.5ecd8a62.css">
<script src="/pr-preview/pr-2178/assets/js/runtime~main.ce001ce3.js" defer="defer"></script>
<script src="/pr-preview/pr-2178/assets/js/main.738756e3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK8SB2L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/pr-2178/"><div class="navbar__logo"><img src="/pr-preview/pr-2178/img/estuary-new.png" alt="Estuary Flow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pr-preview/pr-2178/img/estuary-new.png" alt="Estuary Flow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Estuary Flow</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-2178/">Documentation</a><div class="navbar__item"><a href="https://estuary.dev/blog">Blog</a></div><div class="navbar__item button-link"><a href="https://dashboard.estuary.dev/register">Try Estuary</a></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2178/">Getting Started</a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/pr-preview/pr-2178/guides/">User guides</a><button aria-label="Expand sidebar category &#x27;User guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/pr-preview/pr-2178/concepts/">Concepts</a><button aria-label="Collapse sidebar category &#x27;Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/catalogs/">Catalog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/captures/">Captures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/collections/">Collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/materialization/">Materializations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/connectors/">Connectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/derivations/">Derivations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/web-app/">Web application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-2178/concepts/flowctl/">flowctl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/import/">Imports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/schemas/">Schemas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/storage-mappings/">Storage mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-2178/concepts/tests/">Tests</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/pr-preview/pr-2178/concepts/advanced/evolutions/">Advanced concepts</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-2178/reference/Connectors/">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-2178/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-2178/concepts/"><span itemprop="name">Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">flowctl</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>flowctl</h1></header>
<p>There are two ways to work with Flow: through the web app, and using the flowctl command-line interface.
flowctl gives you more direct control over the files and directories that comprise your Data Flows.
You can work with any catalog to which you have <a href="/pr-preview/pr-2178/reference/authentication/">access</a>, regardless of whether it was created from the command line or in the web app.</p>
<p>You can also authorize Flow users and roles and generate TypeScript modules to write custom transformations for your <a href="/pr-preview/pr-2178/concepts/derivations/">derivations</a> — workflows that aren&#x27;t yet available in the web app.</p>
<p>flowctl is the only Flow binary that you need to work with,
so distribution and upgrades are all simple.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-and-setup">Installation and setup<a href="#installation-and-setup" class="hash-link" aria-label="Direct link to Installation and setup" title="Direct link to Installation and setup">​</a></h2>
<p>flowctl binaries for MacOS and Linux are available. For Windows, <a href="https://docs.estuary.dev/concepts/flowctl/" target="_blank" rel="noopener noreferrer">install Windows Subsystem for Linux (WSL)</a> to run Linux on Windows, or use a remote development environment.</p>
<ol>
<li>
<p>Copy and paste the appropriate script below into your terminal. This will download flowctl, make it executable, and add it to your <code>PATH</code>.</p>
<ul>
<li>For Linux:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo curl -o /usr/local/bin/flowctl -L &#x27;https://github.com/estuary/flow/releases/latest/download/flowctl-x86_64-linux&#x27; &amp;&amp; sudo chmod +x /usr/local/bin/flowctl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>For Mac:</li>
</ul>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo curl -o /usr/local/bin/flowctl -L &#x27;https://github.com/estuary/flow/releases/latest/download/flowctl-multiarch-macos&#x27; &amp;&amp; sudo chmod +x /usr/local/bin/flowctl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively, Mac users can install with Homebrew:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">brew tap estuary/flowctl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew install flowctl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also find the source files on GitHub <a href="https://go.estuary.dev/flowctl" target="_blank" rel="noopener noreferrer">here</a>.</p>
</li>
<li>
<p>To connect to your Flow account and start a session, <a href="/pr-preview/pr-2178/reference/authentication/#authenticating-flow-using-the-cli">use an authentication token</a> from the web app.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-guides">User guides<a href="#user-guides" class="hash-link" aria-label="Direct link to User guides" title="Direct link to User guides">​</a></h2>
<p><a href="/pr-preview/pr-2178/guides/flowctl/">View guides for common flowctl workflows</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="flowctl-subcommands">flowctl subcommands<a href="#flowctl-subcommands" class="hash-link" aria-label="Direct link to flowctl subcommands" title="Direct link to flowctl subcommands">​</a></h2>
<p>flowctl includes several top-level subcommands representing different functional areas. Each of these include multiple nested subcommands.
Important top-level flowctl subcommands are described below.</p>
<ul>
<li>
<p><code>auth</code> allows you to authenticate your development session in your local development environment.
It&#x27;s also how you provision Flow roles and users. Learn more about <a href="/pr-preview/pr-2178/reference/authentication/">authentication</a>.</p>
</li>
<li>
<p><code>catalog</code> allows you to work with your organization&#x27;s current active catalog entities. You can investigate the current Data Flows,
pull specifications for local editing, test and publish specifications that you wrote or edited locally,
and delete entities from the catalog.</p>
</li>
<li>
<p><code>collections</code> allows you to work with your Flow collections. You can read the data from the collection and output it to stdout, or list the <a href="/pr-preview/pr-2178/concepts/advanced/journals/">journals</a> or journal fragments that comprise the collection. <a href="/pr-preview/pr-2178/concepts/collections/#using-the-flowctl-cli">Learn more about reading collections with flowctl</a>.</p>
</li>
<li>
<p><code>draft</code> provides an alternative method for many of the actions you&#x27;d normally perform with <code>catalog</code>, but common workflows have more steps.</p>
</li>
<li>
<p><code>generate</code> creates stub files and folder structures based on a provided <code>flow.yaml</code> file. This is helpful when <a href="/pr-preview/pr-2178/guides/flowctl/create-derivation/#create-a-derivation-locally">creating a derivation locally</a>.</p>
</li>
<li>
<p><code>logs</code> allows you to review or follow logs for a particular task. This can be useful to help debug captures, derivations, and materializations.</p>
</li>
</ul>
<p>You can access full documentation of all flowctl subcommands from the command line by passing the <code>--help</code> or <code>-h</code> flag, for example:</p>
<ul>
<li>
<p><code>flowctl --help</code> lists top-level flowctl subcommands.</p>
</li>
<li>
<p><code>flowctl catalog --help</code> lists subcommands of <code>catalog</code>.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="editing-data-flows-with-flowctl">Editing Data Flows with flowctl<a href="#editing-data-flows-with-flowctl" class="hash-link" aria-label="Direct link to Editing Data Flows with flowctl" title="Direct link to Editing Data Flows with flowctl">​</a></h2>
<p>flowctl allows you to work locally on the specification files that define your Data Flows.
You&#x27;ll often need to move these specifications back and forth between your local environment and the <strong>catalog</strong>
of published entities.</p>
<p>The basic steps of this workflow are listed below, along with a diagram of the subcommands you&#x27;d use to accomplish them.
Keep in mind that there&#x27;s no single, correct way to work with flowctl,
but we recommend this method to get started.</p>
<ul>
<li>
<p>List all the active specifications in the catalog, which you can then pull into your local environment.
You can filter the output by <a href="/pr-preview/pr-2178/concepts/catalogs/#namespace">prefix</a> or entity type.
For example, <code>flowctl catalog list --prefix acmeCo/sales/ --collections</code> only lists collections under the
<code>acmeCo/sales/</code> prefix.</p>
</li>
<li>
<p>Pull a group of active specifications directly, resulting in local source files. You can refine results by prefix or entity type as described above (1).</p>
<p>Note that if there are already files in your working directory, flowctl must reconcile them with the newly pulled specification.
<a href="#reconciling-specifications-in-local-drafts">Learn more about your options</a>.</p>
</li>
<li>
<p>Make edits locally.</p>
</li>
<li>
<p>Test local specifications (2).</p>
</li>
<li>
<p>Publish local specifications to the catalog (3).</p>
</li>
</ul>
<div class="mermaid">
	graph LR;
    d[Local environment];
    c[Active catalog];
    d-- 2: flowctl catalog test --&gt;d;
    d-- 3: flowctl catalog publish --&gt;c;
    c-- 1: flowctl catalog pull-specs --&gt;d;
</div>
<p><a href="/pr-preview/pr-2178/guides/flowctl/edit-specification-locally/">View the step-by-step guide.</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reconciling-specifications-in-local-drafts">Reconciling specifications in local drafts<a href="#reconciling-specifications-in-local-drafts" class="hash-link" aria-label="Direct link to Reconciling specifications in local drafts" title="Direct link to Reconciling specifications in local drafts">​</a></h3>
<p>When you pull specifications to your working directory directly using <code>flowctl catalog pull-specs</code>,
there may be conflicts between the existing files in that directory and the specifications you pull.</p>
<p>By default, <code>flowctl catalog pull-specs</code> will abort if it detects an existing file with the same name as a specification
it is attempting to pull. You can change this behavior with the <code>--overwrite</code> flag.</p>
<p>Adding the <code>--overwrite</code> flag will pull the new versions of conflicting files in place of the old versions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development-directories">Development directories<a href="#development-directories" class="hash-link" aria-label="Direct link to Development directories" title="Direct link to Development directories">​</a></h2>
<p>Flow specifications and other files are written to your working directory when you run <code>flowctl draft develop</code> or <code>flowctl catalog pull-specs</code>.</p>
<p>They typically include:</p>
<ul>
<li>
<p><code>flow.yaml</code>:
The main specification file that imports all other Flow specification files created in a single operation.
As part of local development, you may add new specifications that you create as imports.</p>
</li>
<li>
<p><code>flow_generated/</code>:
Directory of generated files, including TypeScript classes and interfaces.
See <a href="#typescript-code-generation">TypeScript code generation</a>.</p>
</li>
<li>
<p><code>&lt;prefix-name&gt;/</code>:
Directory of specifications that you pulled. Its name corresponds to your catalog prefix. Its contents will vary, but it may contain various YAML files and subdirectories.</p>
</li>
<li>
<p><code>package.json</code> and <code>package-lock.json</code>:
Files used by <code>npm</code> to manage dependencies and your Data Flow&#x27;s associated JavaScript project.
You may customize <code>package.json</code>,
but its <code>dependencies</code> stanza will be overwritten by the
<a href="/pr-preview/pr-2178/concepts/import/#importing-derivation-resources">npmDependencies</a>
of your Flow specification source files, if any exist.</p>
</li>
</ul>
<p>When you run commands like <code>flowctl catalog publish</code> or <code>flowctl draft author</code>, you can use the <code>--source-dir</code> flag
to push specifications from a directory other than your current working directory,
for example, <code>flowctl draft author --source-dir ../AcmeCoNew/marketing</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="typescript-code-generation">TypeScript code generation<a href="#typescript-code-generation" class="hash-link" aria-label="Direct link to TypeScript code generation" title="Direct link to TypeScript code generation">​</a></h3>
<p>TypeScript files are used in the Flow catalog both as part of the automatic build process,
and to define lambdas functions for <a href="/pr-preview/pr-2178/concepts/derivations/">derivations</a>, which requires your input.</p>
<p>As part of the Data Flow build process, Flow translates your
<a href="/pr-preview/pr-2178/concepts/schemas/">schemas</a>
into equivalent TypeScript types on your behalf.
These definitions live within <code>flow_generated/</code> in your Data Flow&#x27;s build directory,
and are frequently over-written by invocations of <code>flowctl</code>.
Files in this subdirectory are human-readable and stable.
You may want to commit them as part of a GitOps-managed project, but this isn&#x27;t required.</p>
<p>Whenever you define a derivation that uses a <a href="/pr-preview/pr-2178/concepts/derivations/#lambdas">lambda</a>,
you must define the lambda in an accompanying TypeScript module, and reference that module
in the derivation&#x27;s definition. To facilitate this,
you can generate a stub of the module using <code>flowctl generate</code>
and simply write the function bodies.
<a href="/pr-preview/pr-2178/concepts/derivations/#modules">Learn more about this workflow.</a></p>
<p>If a TypeScript module exists, <code>flowctl</code> will never overwrite it,
even if you update or expand your specifications such that the required interfaces have changed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="protecting-secrets">Protecting secrets<a href="#protecting-secrets" class="hash-link" aria-label="Direct link to Protecting secrets" title="Direct link to Protecting secrets">​</a></h2>
<p>Most endpoint systems require credentials of some kind,
such as a username or password.</p>
<p>Sensitive credentials should be protected while not in use.
The only time a credential needs to be directly accessed is when Flow initiates the connector.</p>
<p>Flow integrates with Mozilla’s <a href="https://github.com/mozilla/sops" target="_blank" rel="noopener noreferrer">sops</a> tool,
which can encrypt and protect credentials.
It stores a <code>sops</code>-protected configuration in its encrypted form,
and decrypts it only when invoking a connector on the your behalf.</p>
<p>sops, short for “Secrets Operations,” is a tool that encrypts the values of a JSON or YAML document
against a key management system (KMS) such as Google Cloud Platform KMS, Azure Key Vault, or Hashicorp Vault.
Encryption or decryption of a credential with <code>sops</code> is an active process:
it requires that the user (or the Flow runtime identity) have a current authorization to the required KMS,
and creates a request trace which can be logged and audited.
It&#x27;s also possible to revoke access to the KMS,
which immediately and permanently removes access to the protected credential.</p>
<p>When you use the Flow web application, Flow automatically
adds <code>sops</code> protection to sensitive fields on your behalf.
You can also implement <code>sops</code> manually if you are writing a Flow specification locally.
The examples below provide a useful reference.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-protect-a-configuration">Example: Protect a configuration<a href="#example-protect-a-configuration" class="hash-link" aria-label="Direct link to Example: Protect a configuration" title="Direct link to Example: Protect a configuration">​</a></h3>
<p>Suppose you&#x27;re given a connector configuration:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is sensitive!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can protect it using a Google KMS key that you own:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Login to Google Cloud and initialize application default credentials used by `sops`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ gcloud auth application-default login</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use `sops` to re-write the configuration document in place, protecting its values.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ sops --encrypt --in-place --gcp-kms projects/your-project-id/locations/us-central1/keyRings/your-ring/cryptoKeys/your-key-name config.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>sops</code> re-writes the file, wrapping each value in an encrypted envelope and adding a <code>sops</code> metadata section:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">K/clly65pThTg2U=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">1bNmY8wjtjHFBcXLR1KFcsNMGVXRl5LGTdREUZIgcEU=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">5GKcguVPihXXDIM7HHuNnA==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">IDDY+fl0/gAcsH+6tjRdww+G</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Ye8st7zJ9wsMRMs6BoAyWlaJeNc9qeNjkkjo6BPp/tE=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">EPS9Unkdg4eAFICGujlTfQ==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">w+F7MMwQhw==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">amHhNCJWAJnJaGujZgjhzVzUZAeSchEpUpBau7RVeCg=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">62HguhnnSDqJdKdwYnj7mQ==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Some items omitted for brevity:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gcp_kms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resource_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id/locations/us</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">central1/keyRings/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ring/cryptoKeys/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">created_at</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T15:49:45Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CiQAW8BC2GDYWrJTp3ikVGkTI2XaZc6F4p/d/PCBlczCz8BZiUISSQCnySJKIptagFkIl01uiBQp056c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lastmodified</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T15:49:45Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3.7.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You then use this <code>config.yaml</code> within your Flow specification.
The Flow runtime knows that this document is protected by <code>sops</code>
will continue to store it in its protected form,
and will attempt a decryption only when invoking a connector on your behalf.</p>
<p>If you need to make further changes to your configuration,
edit it using <code>sops config.yaml</code>.
It&#x27;s not required to provide the KMS key to use again,
as <code>sops</code> finds it within its metadata section.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>When deploying catalogs onto the managed Flow runtime,
you must grant access to decrypt your GCP KMS key to the Flow runtime service agent,
which is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flow-258@helpful-kingdom-273219.iam.gserviceaccount.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-protect-portions-of-a-configuration">Example: Protect portions of a configuration<a href="#example-protect-portions-of-a-configuration" class="hash-link" aria-label="Direct link to Example: Protect portions of a configuration" title="Direct link to Example: Protect portions of a configuration">​</a></h3>
<p>Endpoint configurations are typically a mix of sensitive and non-sensitive values.
It can be cumbersome when <code>sops</code> protects an entire configuration document as you
lose visibility into non-sensitive values, which you might prefer to store as
cleartext for ease of use.</p>
<p>You can use the encrypted-suffix feature of <code>sops</code> to selectively protect credentials:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password_sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;this is sensitive!&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that <code>password</code> in this configuration has an added <code>_sops</code> suffix.
Next, encrypt only values which have that suffix:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sops --encrypt --in-place --encrypted-suffix &quot;_sops&quot; --gcp-kms projects/your-project-id/locations/us-central1/keyRings/your-ring/cryptoKeys/your-key-name config.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>sops</code> re-writes the file, wrapping only values having a &quot;_sops&quot; suffix and adding its <code>sops</code> metadata section:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my.hostname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">password_sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ENC</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">AES256_GCM</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">dlfidMrHfDxN//nWQTPCsjoG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iv</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">DHQ5dXhyOOSKI6ZIzcUM67R6DD/2MSE4LENRgOt6GPY=</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tag</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">FNs2pTlzYlagvz7vP/YcIQ==</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">user</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">sops</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Some items omitted for brevity:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">encrypted_suffix</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> _sops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">gcp_kms</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">resource_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> projects/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">project</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">id/locations/us</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">central1/keyRings/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">ring/cryptoKeys/your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">created_at</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T16:06:36Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CiQAW8BC2Au779CGdMFUjWPhNleCTAj9rL949sBvPQ6eyAC3EdESSQCnySJKD3eWX8XrtrgHqx327</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">lastmodified</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2022-01-05T16:06:37Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 3.7.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You then use this <code>config.yaml</code> within your Flow specification.
Flow looks for and understands the <code>encrypted_suffix</code>,
and will remove this suffix from configuration keys before passing them to the connector.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<p>If you&#x27;re developing locally with <code>flowctl</code>, watch out for these errors:</p>
<ul>
<li>
<p><code>Failed to locate sops</code>: sops may not be installed correctly. See these <a href="https://github.com/getsops/sops/releases" target="_blank" rel="noopener noreferrer">installation instructions</a> and ensure sops is on your PATH. For details on working with sops, see <a href="#protecting-secrets">Protecting secrets</a> above.</p>
</li>
<li>
<p><code>Decrypting sops document failed</code>: ensure you have correctly applied a KMS key using sops to your configuration file. See above for <a href="#example-protect-a-configuration">examples</a>. Note that you will not be able to decrypt credentials entered via the Flow web app.</p>
</li>
</ul>
<p>Since updates are released regularly, make sure you&#x27;re using the latest version of <code>flowctl</code>. You can see the latest versions and changelogs on the <a href="https://github.com/estuary/flow/releases" target="_blank" rel="noopener noreferrer">Flow releases</a> page.</p>
<p>To check your current version, run: <code>flowctl --version</code></p>
<p>If you installed <code>flowctl</code> with Homebrew, you can upgrade with: <code>brew update &amp;&amp; brew upgrade flowctl</code></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/estuary/flow/edit/master/site/docs/concepts/flowctl.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-2178/concepts/web-app/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Web application</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-2178/concepts/import/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Imports</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation-and-setup" class="table-of-contents__link toc-highlight">Installation and setup</a></li><li><a href="#user-guides" class="table-of-contents__link toc-highlight">User guides</a></li><li><a href="#flowctl-subcommands" class="table-of-contents__link toc-highlight">flowctl subcommands</a></li><li><a href="#editing-data-flows-with-flowctl" class="table-of-contents__link toc-highlight">Editing Data Flows with flowctl</a><ul><li><a href="#reconciling-specifications-in-local-drafts" class="table-of-contents__link toc-highlight">Reconciling specifications in local drafts</a></li></ul></li><li><a href="#development-directories" class="table-of-contents__link toc-highlight">Development directories</a><ul><li><a href="#typescript-code-generation" class="table-of-contents__link toc-highlight">TypeScript code generation</a></li></ul></li><li><a href="#protecting-secrets" class="table-of-contents__link toc-highlight">Protecting secrets</a><ul><li><a href="#example-protect-a-configuration" class="table-of-contents__link toc-highlight">Example: Protect a configuration</a></li><li><a href="#example-protect-portions-of-a-configuration" class="table-of-contents__link toc-highlight">Example: Protect portions of a configuration</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/pr-preview/pr-2178/">Flow Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://go.estuary.dev/slack" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/EstuaryDev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/estuary/flow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@estuarydev" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Estuary Technologies, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>