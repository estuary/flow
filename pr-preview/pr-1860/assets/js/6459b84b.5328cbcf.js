"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6459],{24519:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>x,frontMatter:()=>c,metadata:()=>u,toc:()=>p});var o=t(74848),s=t(28453),r=t(96540);const a=()=>{const e=window.location.href,[n,t]=r.useState("");return r.useMemo((()=>new URLSearchParams(window.location.search.slice(1)).get("code")),[])?(0,o.jsx)("span",{style:{color:"green"},children:"You have successfully added the application to your tenant"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{children:["Input your ",(0,o.jsx)("b",{children:"Tenant ID"})," and follow the prompts to add our application to your tenant:"]}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("input",{placeholder:"Tenant ID",value:n,onChange:e=>t(e.target.value)}),(0,o.jsx)("a",{style:{marginLeft:8,color:n.length<1?"inherit":void 0},href:n.length>0?(s=n,`https://login.microsoftonline.com/${s}/oauth2/authorize?client_id=42cb0c6c-dab0-411f-9c21-16d5a2b1b025&response_type=code&redirect_uri=${encodeURIComponent(e)}&resource_id=${encodeURIComponent("https://storage.azure.com")}`):null,children:"Authorize"})]});var s};var i=t(92303);function l(e){let{children:n,fallback:t}=e;return(0,i.A)()?(0,o.jsx)(o.Fragment,{children:n?.()}):t??null}const c={title:"Configure Cloud Storage",description:"Learn how to configure Flow to use your cloud storage",slug:"installation",sidebar_position:5},d="Configuring Cloud Storage for Flow",u={id:"getting-started/installation",title:"Configure Cloud Storage",description:"Learn how to configure Flow to use your cloud storage",source:"@site/docs/getting-started/installation.mdx",sourceDirName:"getting-started",slug:"/getting-started/installation",permalink:"/pr-preview/pr-1860/getting-started/installation",draft:!1,unlisted:!1,editUrl:"https://github.com/estuary/flow/edit/master/site/docs/getting-started/installation.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Configure Cloud Storage",description:"Learn how to configure Flow to use your cloud storage",slug:"installation",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Comparisons",permalink:"/pr-preview/pr-1860/getting-started/comparisons"},next:{title:"Flow tutorials",permalink:"/pr-preview/pr-1860/getting-started/tutorials/"}},h={},p=[{value:"Google Cloud Storage buckets",id:"google-cloud-storage-buckets",level:2},{value:"Amazon S3 buckets",id:"amazon-s3-buckets",level:2},{value:"Azure Blob Storage",id:"azure-blob-storage",level:2},{value:"Add the Bucket",id:"add-the-bucket",level:2}];function g(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:["\n",(0,o.jsx)(n.h1,{id:"configuring-cloud-storage-for-flow",children:"Configuring Cloud Storage for Flow"}),"\n",(0,o.jsx)(n.p,{children:"New Flow accounts are connected to Flow's secure cloud storage bucket to store collection data.\nTo switch to your own bucket, choose a cloud provider and complete the setup steps:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"#google-cloud-storage-buckets",children:"Google Cloud Storage"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"#amazon-s3-buckets",children:"Amazon S3"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"#azure-blob-storage",children:"Azure Blob Storage"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Once you're done, ",(0,o.jsx)(n.a,{href:"#give-us-a-ring",children:"get in touch"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"google-cloud-storage-buckets",children:"Google Cloud Storage buckets"}),"\n",(0,o.jsx)(n.p,{children:"You'll need to grant Estuary Flow access to your GCS bucket."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://cloud.google.com/storage/docs/creating-buckets",children:"Create a bucket to use with Flow"}),", if you haven't already."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Follow the steps\nto ",(0,o.jsx)(n.a,{href:"https://cloud.google.com/storage/docs/access-control/using-iam-permissions#bucket-add",children:"add a principal to a bucket level policy"}),".\nAs you do so:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["For the principal, enter ",(0,o.jsx)(n.code,{children:"flow-258@helpful-kingdom-273219.iam.gserviceaccount.com"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Select the ",(0,o.jsx)(n.a,{href:"https://cloud.google.com/storage/docs/access-control/iam-roles",children:(0,o.jsx)(n.code,{children:"roles/storage.admin"})})," role."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"amazon-s3-buckets",children:"Amazon S3 buckets"}),"\n",(0,o.jsx)(n.p,{children:"You'll need to grant Estuary Flow access to your S3 bucket."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html",children:"Create a bucket to use with Flow"}),",\nif you haven't already."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Follow the steps\nto ",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/add-bucket-policy.html",children:"add a bucket policy"}),", pasting the\npolicy below. The policy below will work for the US Data Plane. If you're on the EU Data Plane, [get in touch].\nBe sure to replace ",(0,o.jsx)(n.code,{children:"YOUR-S3-BUCKET"})," with the actual name of your bucket."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "AllowUsersToAccessObjectsUnderPrefix",\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::789740162118:user/flow-aws"\n      },\n      "Action": [\n        "s3:GetObject",\n        "s3:PutObject",\n        "s3:DeleteObject"\n      ],\n      "Resource": "arn:aws:s3:::YOUR-S3-BUCKET/*"\n    },\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::789740162118:user/flow-aws"\n      },\n      "Action": "s3:ListBucket",\n      "Resource": "arn:aws:s3:::YOUR-S3-BUCKET"\n    },\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::789740162118:user/flow-aws"\n      },\n      "Action": "s3:GetBucketPolicy",\n      "Resource": "arn:aws:s3:::YOUR-S3-BUCKET"\n    }\n  ]\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"azure-blob-storage",children:"Azure Blob Storage"}),"\n",(0,o.jsx)(n.p,{children:"You'll need to grant Estuary Flow access to your storage account and container.\nYou'll also need to provide some identifying information."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-portal#create-a-container",children:"Create an Azure Blob Storage container"}),"\nto use with Flow, if you haven't already."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Gather the following information. You'll need this when you contact us to complete setup."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Your ",(0,o.jsx)(n.strong,{children:"Azure AD tenant ID"}),". You can find this in the ",(0,o.jsx)(n.strong,{children:"Azure Active Directory"})," page.\n",(0,o.jsx)(n.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//Azure_AD_Tenant_ID_1b60184837/Azure_AD_Tenant_ID_1b60184837.png",alt:"Azure AD Tenant ID"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Your ",(0,o.jsx)(n.strong,{children:"Azure Blob Storage account ID"}),". You can find this in the ",(0,o.jsx)(n.strong,{children:"Storage Accounts"})," page.\n",(0,o.jsx)(n.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//Azure_Storage_Account_Name_82aa30ae17/Azure_Storage_Account_Name_82aa30ae17.png",alt:"Azure Storage Account Name"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Your ",(0,o.jsx)(n.strong,{children:"Azure Blob Storage container ID"}),". You can find this inside your storage account.\n",(0,o.jsx)(n.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//Azure_Container_ID_1980bbc9f3/Azure_Container_ID_1980bbc9f3.png",alt:"Azure Container ID"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["You'll grant Flow access to your storage resources by connecting to Estuary's\n",(0,o.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/what-is-application-management",children:"Azure application"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Add Estuary's Azure application to your tenant."}),"\n"]}),"\n"]}),"\n","\n",(0,o.jsx)(l,{children:()=>(0,o.jsx)(a,{})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Grant the application access to your storage account via the\n",(0,o.jsxs)(n.a,{href:"https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#storage-blob-data-owner",children:["\n",(0,o.jsx)(n.code,{children:"Storage Blob Data Owner"})]}),"\nIAM role."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Inside your storage account's ",(0,o.jsx)(n.strong,{children:"Access Control (IAM)"})," tab, click ",(0,o.jsx)(n.strong,{children:"Add Role Assignment"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Search for ",(0,o.jsx)(n.code,{children:"Storage Blob Data Owner"})," and select it."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["On the next page, make sure ",(0,o.jsx)(n.code,{children:"User, group, or service principal"})," is selected, then click ",(0,o.jsx)(n.strong,{children:"+ Select Members"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["You must search for the exact name of the application, otherwise it won't show up: ",(0,o.jsx)(n.code,{children:"Estuary Storage Mappings Prod"})]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Once you've selected the application, finish granting the role."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For more help, see\nthe ",(0,o.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal",children:"Azure docs"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"add-the-bucket",children:"Add the Bucket"}),"\n",(0,o.jsx)(n.p,{children:'If your bucket is for Google Cloud Storage or AWS S3, you can add it yourself. Once you\'ve finished the above steps,\nhead to "Admin", "Settings" then "Configure Cloud Storage"\nand enter the relevant information there and we\'ll start to use your bucket for all data going forward.'}),"\n",(0,o.jsxs)(n.p,{children:["If your bucket is for Azure, send ",(0,o.jsx)(n.a,{href:"mailto:support@estuary.dev",children:"support@estuary.dev"})," an email with the name of the storage bucket and any other\ninformation you gathered per the steps above.\nLet us know whether you want to use this storage bucket to for your whole Flow account, or just a\nspecific ",(0,o.jsx)(n.a,{href:"/pr-preview/pr-1860/concepts/catalogs#namespace",children:"prefix"}),".\nWe'll be in touch when it's done!"]})]})}function x(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(96540);const s={},r=o.createContext(s);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);