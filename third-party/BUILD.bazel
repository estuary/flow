load("@rules_proto//proto:defs.bzl", "proto_library")

proto_library(
    name = "gogo_proto",
    srcs = ["gogoproto/gogo.proto"],
    strip_import_prefix = "/third-party",
    visibility = ["//visibility:public"],
    deps = [
        "@protobuf//:descriptor_proto",
    ],
)

proto_library(
    name = "broker_proto",
    srcs = ["broker/protocol/protocol.proto"],
    strip_import_prefix = "/third-party",
    visibility = ["//visibility:public"],
    deps = [
        ":gogo_proto",
        "@protobuf//:duration_proto",
    ],
)

proto_library(
    name = "recorded_op_proto",
    srcs = ["consumer/recoverylog/recorded_op.proto"],
    strip_import_prefix = "/third-party",
    visibility = ["//visibility:public"],
    deps = [
        ":gogo_proto",
    ],
)

proto_library(
    name = "consumer_proto",
    srcs = ["consumer/protocol.proto"],
    strip_import_prefix = "/third-party",
    visibility = ["//visibility:public"],
    deps = [
        ":broker_proto",
        ":gogo_proto",
        ":recorded_op_proto",
        "@protobuf//:duration_proto",
    ],
)
