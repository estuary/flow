"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[2255],{28453:(e,s,t)=>{t.d(s,{R:()=>c,x:()=>l});var r=t(96540);const n={},i=r.createContext(n);function c(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(i.Provider,{value:s},e.children)}},88951:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"reference/Connectors/capture-connectors/Salesforce/salesforce-native","title":"Salesforce","description":"This connector captures data from Salesforce objects into Flow collections.","source":"@site/docs/reference/Connectors/capture-connectors/Salesforce/salesforce-native.md","sourceDirName":"reference/Connectors/capture-connectors/Salesforce","slug":"/reference/Connectors/capture-connectors/Salesforce/salesforce-native","permalink":"/reference/Connectors/capture-connectors/Salesforce/salesforce-native","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/reference/Connectors/capture-connectors/Salesforce/salesforce-native.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Salesforce \u2014 Historical data (deprecated)","permalink":"/reference/Connectors/capture-connectors/Salesforce/salesforce-historical-data"},"next":{"title":"Salesforce \u2014 Real-time data (deprecated)","permalink":"/reference/Connectors/capture-connectors/Salesforce/salesforce-real-time"}}');var n=t(74848),i=t(28453);const c={},l="Salesforce",a={},o=[{value:"Supported data resources",id:"supported-data-resources",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Setup",id:"setup",level:3},{value:"Create a read-only Salesforce user",id:"create-a-read-only-salesforce-user",level:4},{value:"Configuration",id:"configuration",level:2},{value:"Properties",id:"properties",level:3},{value:"Endpoint",id:"endpoint",level:4},{value:"Bindings",id:"bindings",level:4},{value:"Sample",id:"sample",level:3},{value:"Formula Fields",id:"formula-fields",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Field Permissions",id:"field-permissions",level:3}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"salesforce",children:"Salesforce"})}),"\n",(0,n.jsxs)(s.p,{children:["This connector captures data from Salesforce objects into Flow collections.\nIt uses Salesforce's ",(0,n.jsx)(s.a,{href:"https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/asynch_api_intro.htm",children:"Bulk API 2.0"})," and ",(0,n.jsx)(s.a,{href:"https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_rest.htm",children:"REST API"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"This connector offers several unique advantages:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Efficient Backfills"}),": Uses Salesforce's Bulk API 2.0 for initial data loads and backfills, enabling significantly faster data transfer rates while preserving REST API call limits. Note: Bulk API 2.0 has its own usage limits, and bulk jobs submitted by the connector count against those."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Formula Field Handling"}),": The connector automatically refreshes formula fields on a configurable schedule (default: daily). This ensures your formula field data stays current without manual intervention, even though Salesforce doesn't track formula field changes in record modification timestamps."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Custom Field Support"}),": Enhanced handling of custom fields with better type detection and mapping, ensuring all your custom Salesforce objects and fields are captured accurately."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["This connector is available for use in the Flow web application.\nFor local development or open-source workflows, ",(0,n.jsx)(s.a,{href:"https://ghcr.io/estuary/source-salesforce-native:dev",children:(0,n.jsx)(s.code,{children:"ghcr.io/estuary/source-salesforce-native:dev"})})," provides the latest connector image. You can also follow the link in your browser to see past image versions."]}),"\n",(0,n.jsx)(s.h2,{id:"supported-data-resources",children:"Supported data resources"}),"\n",(0,n.jsxs)(s.p,{children:["This connector captures Salesforce ",(0,n.jsx)(s.a,{href:"https://developer.salesforce.com/docs/atlas.en-us.object_reference.meta/object_reference/sforce_api_objects_list.htm",children:"standard objects"}),", ",(0,n.jsx)(s.a,{href:"https://developer.salesforce.com/docs/atlas.en-us.object_reference.meta/object_reference/sforce_api_objects_custom_objects.htm",children:"custom objects"}),", and field history for custom objects."]}),"\n",(0,n.jsx)(s.p,{children:"All available objects will appear after connecting to Salesforce."}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsxs)(s.p,{children:["To reduce how many API calls are needed to discover objects, the connector maintains an internal list of standard objects available for replication. If a standard object does not appear as an available binding after connecting to Salesforce, please contact us via ",(0,n.jsx)(s.a,{href:"https://go.estuary.dev/slack",children:"Slack"})," or ",(0,n.jsx)(s.a,{href:"mailto://support@estuary.dev",children:"email"})," to request the standard object's addition to the connector's internal list."]})}),"\n",(0,n.jsx)(s.p,{children:"Because most Salesforce accounts contain large volumes of data, you may only want to capture a subset of the available objects.\nThere are several ways to control this:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Create a ",(0,n.jsx)(s.a,{href:"#create-a-read-only-salesforce-user",children:"dedicated Salesforce user"})," with access only to the objects you'd like to capture."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["During ",(0,n.jsx)(s.a,{href:"/guides/create-dataflow#create-a-capture",children:"capture creation in the web application"}),",\ndisable the bindings for objects you don't want to capture."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(s.h3,{id:"authentication",children:"Authentication"}),"\n",(0,n.jsx)(s.p,{children:"There are two different ways to authenticate with Salesforce when capturing data into Flow: using OAuth or using username, password, and security token. Both require the following:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["A Salesforce organization on the Enterprise tier, or with an equivalent ",(0,n.jsx)(s.a,{href:"https://developer.salesforce.com/docs/atlas.en-us.salesforce_app_limits_cheatsheet.meta/salesforce_app_limits_cheatsheet/salesforce_app_limits_platform_api.htm",children:"API request allocation"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["Salesforce user credentials. We recommend creating a dedicated read-only ",(0,n.jsx)(s.a,{href:"#create-a-read-only-salesforce-user",children:"Salesforce user"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"setup",children:"Setup"}),"\n",(0,n.jsx)(s.h4,{id:"create-a-read-only-salesforce-user",children:"Create a read-only Salesforce user"}),"\n",(0,n.jsx)(s.p,{children:"Creating a dedicated read-only Salesforce user is a simple way to specify which objects Flow will capture.\nThis is useful if you have a large amount of data in your Salesforce organization."}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["While signed in as an administrator, create a ",(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=sf.users_profiles_cloning.htm&type=5",children:"new profile"})," by cloning the standard ",(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=sf.standard_profiles.htm&type=5",children:"Minimum Access"})," profile."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=sf.perm_sets_object_perms_edit.htm&type=5",children:"Edit the new profile's permissions"}),". Grant it read access to all the standard and custom objects you'd like to capture with Flow."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=sf.adding_new_users.htm&type=5",children:"Create a new user"}),", applying the profile you just created.\nYou'll use this user's email address and password to authenticate Salesforce in Flow. If you're authenticating with username, password, and security token, you'll also need the user's security token."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,n.jsxs)(s.p,{children:["You configure connectors either in the Flow web app, or by directly editing the Flow specification file.\nSee ",(0,n.jsx)(s.a,{href:"/concepts/connectors#using-connectors",children:"connectors"})," to learn more about using connectors. The values and specification sample below provide configuration details specific to the Salesforce source connector."]}),"\n",(0,n.jsx)(s.h3,{id:"properties",children:"Properties"}),"\n",(0,n.jsx)(s.h4,{id:"endpoint",children:"Endpoint"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Property"}),(0,n.jsx)(s.th,{children:"Title"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Required/Default"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/start_date"})}),(0,n.jsx)(s.td,{children:"Start Date"}),(0,n.jsx)(s.td,{children:"Start date in the format YYYY-MM-DD. Data added on and after this date will be captured. If left blank, the start date will be set to Salesforce's founding date."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"1999-02-03T00:00:00Z"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/is_sandbox"})}),(0,n.jsx)(s.td,{children:"Sandbox"}),(0,n.jsxs)(s.td,{children:["Whether you're using a ",(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=sf.deploy_sandboxes_parent.htm&type=5",children:"Salesforce Sandbox"}),"."]}),(0,n.jsx)(s.td,{children:"boolean"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"false"})})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/credentials_title"})}),(0,n.jsx)(s.td,{children:"Authentication Method"}),(0,n.jsxs)(s.td,{children:["Set to ",(0,n.jsx)(s.code,{children:"OAuth Credentials"})," or ",(0,n.jsx)(s.code,{children:"Username, Password, & Security Token"}),"."]}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/client_id"})}),(0,n.jsx)(s.td,{children:"OAuth Client ID"}),(0,n.jsx)(s.td,{children:"The OAuth app's client ID."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for OAuth authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/client_secret"})}),(0,n.jsx)(s.td,{children:"OAuth Client Secret"}),(0,n.jsx)(s.td,{children:"The OAuth app's client secret."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for OAuth authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/refresh_token"})}),(0,n.jsx)(s.td,{children:"OAuth Refresh Token"}),(0,n.jsx)(s.td,{children:"The refresh token received from the OAuth app."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for OAuth authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/instance_url"})}),(0,n.jsx)(s.td,{children:"Instance URL"}),(0,n.jsx)(s.td,{children:"The URL for the instance of your Salesforce organization."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for OAuth authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/username"})}),(0,n.jsx)(s.td,{children:"Username"}),(0,n.jsx)(s.td,{children:"The user's username."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for Username, Password, & Security Token authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/password"})}),(0,n.jsx)(s.td,{children:"Password"}),(0,n.jsx)(s.td,{children:"The user's password."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for Username, Password, & Security Token authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/credentials/security_token"})}),(0,n.jsx)(s.td,{children:"Security Token"}),(0,n.jsx)(s.td,{children:"The user's security token."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required for Username, Password, & Security Token authentication"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/advanced/window_size"})}),(0,n.jsx)(s.td,{children:"Window size"}),(0,n.jsx)(s.td,{children:"The date window size in days to use when querying the Salesforce APIs."}),(0,n.jsx)(s.td,{children:"integer"}),(0,n.jsx)(s.td,{children:"18250"})]})]})]}),"\n",(0,n.jsx)(s.h4,{id:"bindings",children:"Bindings"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Property"}),(0,n.jsx)(s.th,{children:"Title"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Required/Default"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"/name"})})}),(0,n.jsx)(s.td,{children:"Name"}),(0,n.jsx)(s.td,{children:"Name of the data resource."}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"Required"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/interval"})}),(0,n.jsx)(s.td,{children:"Interval"}),(0,n.jsx)(s.td,{children:"Interval between data syncs"}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"PT5M"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"/schedule"})}),(0,n.jsx)(s.td,{children:"Formula Field Refresh Schedule"}),(0,n.jsxs)(s.td,{children:["The schedule for refreshing this binding's ",(0,n.jsx)(s.a,{href:"#formula-fields",children:"formula fields"}),". Accepts a cron expression. For example, a schedule of ",(0,n.jsx)(s.code,{children:"55 23 * * *"})," means the binding will refresh formula fields at 23:55 UTC every day. If left empty, the binding will not refresh formula fields."]}),(0,n.jsx)(s.td,{children:"string"}),(0,n.jsx)(s.td,{children:"55 23 * * *"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"sample",children:"Sample"}),"\n",(0,n.jsx)(s.p,{children:"This sample specification reflects the manual authentication method."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",children:'captures:\n  ${PREFIX}/${CAPTURE_NAME}:\n    endpoint:\n      connector:\n        image: ghcr.io/estuary/source-salesforce-native:dev\n        config:\n          credentials:\n            credentials_title: "OAuth Credentials"\n            client_id: <secret>\n            client_secret: <secret>\n            instance_url: https://somedomain.my.salesforce.com\n            refresh_token: <secret>\n          is_sandbox: false\n          start_date: "2025-03-19T12:00:00Z"\n          advanced:\n            window_size: 18250\n    bindings:\n      - resource:\n          name: Account\n          interval: PT5M\n          schedule: "55 23 * * *"\n        target: ${PREFIX}/Account\n      {...}\n'})}),"\n",(0,n.jsx)(s.h2,{id:"formula-fields",children:"Formula Fields"}),"\n",(0,n.jsxs)(s.p,{children:["Salesforce objects can contain ",(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=platform.customize_formulas.htm&type=5",children:"formula fields"}),", fields whose values are calculated at query time. Since formula fields ",(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=000396215&type=1",children:"do not maintain state"})," in Salesforce, formula fields updates do not update the associated record's last modified timestamp. The Salesforce connector uses the last modified timestamp to incrementally detect changes, and since formula field updates don't update the last modified timestamp, formula fields updates are not incrementally captured by the connector."]}),"\n",(0,n.jsxs)(s.p,{children:["To address this challenge, the Salesforce connector is able to refresh the values of formula fields on a schedule after the initial backfill completes. This is controlled at a binding level by the cron expression in the ",(0,n.jsxs)(s.a,{href:"#bindings",children:[(0,n.jsx)(s.code,{children:"schedule"})," property"]}),". When a scheduled formula field refresh occurs, the connector fetches every record's current formula field values and merges them into the associated collection with a top-level ",(0,n.jsxs)(s.a,{href:"/reference/reduction-strategies/merge",children:[(0,n.jsx)(s.code,{children:"merge"})," reduction strategy"]}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,n.jsx)(s.h3,{id:"field-permissions",children:"Field Permissions"}),"\n",(0,n.jsxs)(s.p,{children:["If a field is not present in documents captured by the connector but the field exists on the object in Salesforce, confirm that the field is visible for the configured user in Salesforce's ",(0,n.jsx)(s.a,{href:"https://help.salesforce.com/s/articleView?id=platform.users_profiles_field_perms.htm&type=5",children:"field permissions"}),". If the Salesforce account used when authenticating the connector does not have permission to view a field, Salesforce prevents the connector from replicating that field."]}),"\n",(0,n.jsx)(s.p,{children:"To check field permissions in Salesforce:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Go to ",(0,n.jsx)(s.strong,{children:"Setup > Object Manager"})]}),"\n",(0,n.jsx)(s.li,{children:"Click the object for the specific field (Account, Contact, Opportunity, etc.)"}),"\n",(0,n.jsx)(s.li,{children:'Click "Fields & Relationships" and select the field that is not being captured.'}),"\n",(0,n.jsx)(s.li,{children:'Click "Set Field-Level Security" and make sure the profile of the account used for authentication has visibility for the field.'}),"\n",(0,n.jsx)(s.li,{children:'If the associate profile does not have visibility, update it and click "Save".'}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);