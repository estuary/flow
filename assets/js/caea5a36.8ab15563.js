"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[3740],{28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>r});var l=n(96540);const t={},o=l.createContext(t);function i(e){const s=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(o.Provider,{value:s},e.children)}},40950:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"guides/flowctl/troubleshoot-task","title":"Troubleshoot a task with flowctl","description":"flowctl offers the most advanced views of task logs.","source":"@site/docs/guides/flowctl/troubleshoot-task.md","sourceDirName":"guides/flowctl","slug":"/guides/flowctl/troubleshoot-task","permalink":"/guides/flowctl/troubleshoot-task","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/guides/flowctl/troubleshoot-task.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Create a derivation with flowctl","permalink":"/guides/flowctl/create-derivation"},"next":{"title":"flowctl in Automated and Programmatic Contexts","permalink":"/guides/flowctl/ci-cd"}}');var t=n(74848),o=n(28453);const i={sidebar_position:3},r="Troubleshoot a task with flowctl",a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Print task logs",id:"print-task-logs",level:2},{value:"Change log level",id:"change-log-level",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"troubleshoot-a-task-with-flowctl",children:"Troubleshoot a task with flowctl"})}),"\n",(0,t.jsxs)(s.p,{children:["flowctl offers the most advanced views of ",(0,t.jsx)(s.a,{href:"/concepts/advanced/logs-stats",children:"task logs"}),".\nIf a task has errors or is failing in the web app, you'll be able to troubleshoot more effectively with flowctl."]}),"\n",(0,t.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(s.p,{children:"To complete this workflow, you need:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["An ",(0,t.jsx)(s.a,{href:"/",children:"Estuary account"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"/guides/get-started-with-flowctl",children:"flowctl installed locally"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"print-task-logs",children:"Print task logs"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Authorize flowctl."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Go to the ",(0,t.jsx)(s.a,{href:"https://dashboard.estuary.dev/admin/api",children:"CLI-API tab of the web app"})," and copy your access token."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Run ",(0,t.jsx)(s.code,{children:"flowctl auth token --token <paste-token-here>"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Identify the name of the failing task in the web app; for example ",(0,t.jsx)(s.code,{children:"myOrg/marketing/leads"}),".\nUse the tables on the Captures or Materializations pages of the web app to do so."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Run ",(0,t.jsx)(s.code,{children:"flowctl logs --task <task-name>"}),". You have several options to get more specific. For example:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"flowctl logs --task myOrg/marketing/leads --follow"})," \u2014 If the task hasn't failed, continuously print logs as they're generated."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"flowctl logs --task myOrg/marketing/leads --since 1h"})," \u2014 Print logs from approximately the last hour.\nThe actual output window is approximate and may somewhat exceed this time boundary.\nYou may use any time, for example ",(0,t.jsx)(s.code,{children:"10m"})," and ",(0,t.jsx)(s.code,{children:"1d"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"change-log-level",children:"Change log level"}),"\n",(0,t.jsx)(s.p,{children:"If your logs aren't providing enough detail, you can change the log level."}),"\n",(0,t.jsx)(s.p,{children:"Flow offers several log levels. From least to most detailed, these are:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"error"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"warn"})}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"info"})," (default)"]}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"debug"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"trace"})}),"\n"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Follow the guide to ",(0,t.jsx)(s.a,{href:"/guides/flowctl/edit-specification-locally",children:"edit a specification with flowctl"}),"."]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Working in your local specification file, add the ",(0,t.jsx)(s.code,{children:"shards"})," stanza to the capture or materialization specification:"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",children:"myOrg/marketing/leads:\n  shards:\n    logLevel: debug\n  endpoint:\n    {}\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsx)(s.li,{children:"Finish the workflow as described, re-publishing the task."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"/reference/working-logs-stats",children:"Learn more about working with logs"})})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);