"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6919],{28453:(e,s,t)=>{t.d(s,{R:()=>d,x:()=>o});var n=t(96540);const r={},i=n.createContext(r);function d(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),n.createElement(i.Provider,{value:s},e.children)}},70510:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"reference/Connectors/materialization-connectors/PostgreSQL/supabase","title":"Supabase","description":"This connector materializes Flow collections into tables in a Supabase PostgreSQL database.","source":"@site/docs/reference/Connectors/materialization-connectors/PostgreSQL/supabase.md","sourceDirName":"reference/Connectors/materialization-connectors/PostgreSQL","slug":"/reference/Connectors/materialization-connectors/PostgreSQL/supabase","permalink":"/reference/Connectors/materialization-connectors/PostgreSQL/supabase","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/reference/Connectors/materialization-connectors/PostgreSQL/supabase.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Google Cloud SQL for PostgreSQL","permalink":"/reference/Connectors/materialization-connectors/PostgreSQL/google-cloud-sql-postgres"},"next":{"title":"Rockset","permalink":"/reference/Connectors/materialization-connectors/Rockset"}}');var r=t(74848),i=t(28453);const d={},o="Supabase",a={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup",id:"setup",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Properties",id:"properties",level:3},{value:"Endpoint",id:"endpoint",level:4},{value:"Bindings",id:"bindings",level:4},{value:"Sample",id:"sample",level:3},{value:"Delta updates",id:"delta-updates",level:2},{value:"Reserved words",id:"reserved-words",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"supabase",children:"Supabase"})}),"\n",(0,r.jsx)(s.p,{children:"This connector materializes Flow collections into tables in a Supabase PostgreSQL database."}),"\n",(0,r.jsxs)(s.p,{children:["It is available for use in the Flow web application. For local development or open-source workflows, ",(0,r.jsx)(s.a,{href:"https://ghcr.io/estuary/materialize-supabase-postgres:dev",children:(0,r.jsx)(s.code,{children:"ghcr.io/estuary/materialize-supabase-postgres:dev"})})," provides the latest version of the connector as a Docker image. You can also follow the link in your browser to see past image versions."]}),"\n",(0,r.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(s.p,{children:"To use this connector, you'll need:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"A Postgres database in Supabase to materialize into, with user credentials.\nThe connector will create new tables in the database per your specification. Tables created manually in advance are not supported."}),"\n",(0,r.jsxs)(s.li,{children:["A Supabase direct connection hostname which bypasses the Supabase connection pooler.\nSee ",(0,r.jsx)(s.a,{href:"#setup",children:"Setup"})," for details."]}),"\n",(0,r.jsx)(s.li,{children:"At least one Flow collection"}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(s.p,{children:"You must configure your database to allow connections from Estuary."}),"\n",(0,r.jsxs)(s.p,{children:["By default, Supabase guides users into connecting to their database through a\n",(0,r.jsx)(s.a,{href:"https://supabase.com/docs/guides/database/connecting-to-postgres#connection-pooler",children:"Connection Pooler"}),".\nConnection poolers are helpful for many applications, but unfortunately the pooler\ndoes not work well with temporary tables and prepared statements that this connector relies on."]}),"\n",(0,r.jsxs)(s.p,{children:["This materialization connector requires a direct connection address for your database.\nThe address can be found by clicking on the ",(0,r.jsx)(s.strong,{children:"Connect"})," button in your Supabase dashboard.\nUnder the ",(0,r.jsx)(s.strong,{children:"Direct connection"})," option, copy the host and port for your database."]}),"\n",(0,r.jsxs)(s.p,{children:["For example, if the provided connection string is ",(0,r.jsx)(s.code,{children:"postgresql://postgres:[YOUR-PASSWORD]@db.abcdef.supabase.co:5432/postgres"}),", then the address is ",(0,r.jsx)(s.code,{children:"db.abcdef.supabase.co:5432"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(s.p,{children:"To use this connector, begin with data in one or more Flow collections.\nUse the below properties to configure a Supabase materialization, which will direct one or more of your Flow collections to your desired tables, or views, in the database."}),"\n",(0,r.jsx)(s.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.h4,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Property"}),(0,r.jsx)(s.th,{children:"Title"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Required/Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"/address"})})}),(0,r.jsx)(s.td,{children:"Address"}),(0,r.jsxs)(s.td,{children:["Host and port of the database. If only the host is specified, port will default to ",(0,r.jsx)(s.code,{children:"5432"}),"."]}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Required"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"/user"})})}),(0,r.jsx)(s.td,{children:"User"}),(0,r.jsx)(s.td,{children:"Database user to connect as."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Required"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"/password"})})}),(0,r.jsx)(s.td,{children:"Password"}),(0,r.jsx)(s.td,{children:"Password for the specified database user."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Required"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/database"})}),(0,r.jsx)(s.td,{children:"Database"}),(0,r.jsx)(s.td,{children:"Name of the logical database to materialize to."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/schema"})}),(0,r.jsx)(s.td,{children:"Database Schema"}),(0,r.jsxs)(s.td,{children:["Database ",(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/ddl-schemas.html",children:"schema"})," to use for materialized tables (unless overridden within the binding resource configuration) as well as associated materialization metadata tables"]}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:'"public"'})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/advanced"})}),(0,r.jsx)(s.td,{children:"Advanced Options"}),(0,r.jsx)(s.td,{children:"Options for advanced users. You should not typically need to modify these."}),(0,r.jsx)(s.td,{children:"object"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/advanced/sslmode"})}),(0,r.jsx)(s.td,{children:"SSL Mode"}),(0,r.jsx)(s.td,{children:"Overrides SSL connection behavior by setting the 'sslmode' parameter."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"bindings",children:"Bindings"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Property"}),(0,r.jsx)(s.th,{children:"Title"}),(0,r.jsx)(s.th,{children:"Description"}),(0,r.jsx)(s.th,{children:"Type"}),(0,r.jsx)(s.th,{children:"Required/Default"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/additional_table_create_sql"})}),(0,r.jsx)(s.td,{children:"Additional Table Create SQL"}),(0,r.jsx)(s.td,{children:"Additional SQL statement(s) to be run in the same transaction that creates the table."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/delta_updates"})}),(0,r.jsx)(s.td,{children:"Delta Update"}),(0,r.jsx)(s.td,{children:"Should updates to this table be done via delta updates."}),(0,r.jsx)(s.td,{children:"boolean"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"false"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"/schema"})}),(0,r.jsx)(s.td,{children:"Alternative Schema"}),(0,r.jsx)(s.td,{children:"Alternative schema for this table (optional). Overrides schema set in endpoint configuration."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"/table"})})}),(0,r.jsx)(s.td,{children:"Table"}),(0,r.jsx)(s.td,{children:"Table name to materialize to. It will be created by the connector, unless the connector has previously created it."}),(0,r.jsx)(s.td,{children:"string"}),(0,r.jsx)(s.td,{children:"Required"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"sample",children:"Sample"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"materializations:\n  ${PREFIX}/${mat_name}:\n    endpoint:\n      connector:\n        image: ghcr.io/estuary/materialize-supabase-postgres:dev\n        config:\n          database: flow\n          address: db.abcdef.supabase.co:5432\n          password: your-secure-password\n          user: flow\n    bindings:\n      - resource:\n          table: ${TABLE_NAME}\n        source: ${PREFIX}/${COLLECTION_NAME}\n"})}),"\n",(0,r.jsx)(s.h2,{id:"delta-updates",children:"Delta updates"}),"\n",(0,r.jsxs)(s.p,{children:["This connector supports both standard (merge) and ",(0,r.jsx)(s.a,{href:"/concepts/materialization#delta-updates",children:"delta updates"}),".\nThe default is to use standard updates."]}),"\n",(0,r.jsx)(s.h2,{id:"reserved-words",children:"Reserved words"}),"\n",(0,r.jsxs)(s.p,{children:['PostgreSQL has a list of reserved words that must be quoted in order to be used as an identifier.\nFlow considers all the reserved words that are marked as "reserved" in any of the columns in the official ',(0,r.jsx)(s.a,{href:"https://www.postgresql.org/docs/current/sql-keywords-appendix.html",children:"PostgreSQL documentation"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"Flow automatically quotes fields that are in this reserved words list."})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);