"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[5306],{36573:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(96540),l=i(22279),s=i(74848);l.A.initialize({startOnLoad:!0});const r=e=>{let{chart:t}=e;return(0,n.useEffect)((()=>{l.A.contentLoaded()}),[]),(0,s.jsx)("div",{className:"mermaid",children:t})}},50851:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>f,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"guides/flowctl/edit-draft-from-webapp","title":"Edit a draft created in the web app","description":"When you create or edit tasks in the web app, your work is periodically saved as a draft.","source":"@site/docs/guides/flowctl/edit-draft-from-webapp.md","sourceDirName":"guides/flowctl","slug":"/guides/flowctl/edit-draft-from-webapp","permalink":"/guides/flowctl/edit-draft-from-webapp","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/guides/flowctl/edit-draft-from-webapp.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Edit a Flow specification locally","permalink":"/guides/flowctl/edit-specification-locally"},"next":{"title":"Create a derivation with flowctl","permalink":"/guides/flowctl/create-derivation"}}');var l=i(74848),s=i(28453),r=i(36573);const a={sidebar_position:2},d="Edit a draft created in the web app",c={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Identify the draft and pull it locally",id:"identify-the-draft-and-pull-it-locally",level:2},{value:"Edit the draft and publish",id:"edit-the-draft-and-publish",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"edit-a-draft-created-in-the-web-app",children:"Edit a draft created in the web app"})}),"\n",(0,l.jsxs)(t.p,{children:["When you ",(0,l.jsx)(t.a,{href:"/guides/create-dataflow",children:"create"})," or ",(0,l.jsx)(t.a,{href:"/guides/edit-data-flows",children:"edit"})," tasks in the web app, your work is periodically saved as a ",(0,l.jsx)(t.strong,{children:"draft"}),".\nSpecifically, each time you click the ",(0,l.jsx)(t.strong,{children:"Next"})," button to reveal the ",(0,l.jsx)(t.strong,{children:"Save and Publish"})," button, a draft is saved."]}),"\n",(0,l.jsx)(t.p,{children:"If you navigate away from your workflow in the web app before publishing, or if you simply prefer to finish up with flowctl,\nyou can pull the draft into a local environment, finish making changes, and publish the task."}),"\n",(0,l.jsx)(r.A,{chart:"\n\tgraph LR;\n    a[Catalog];\n    d[Local files];\n    c[Draft];\n    d-- 2: Author to draft --\x3ec;\n    c-- 1: Pull draft --\x3ed;\n    c-- 3: Publish draft --\x3ea;\n"}),"\n",(0,l.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsx)(t.p,{children:"To complete this workflow, you need:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["An ",(0,l.jsx)(t.a,{href:"/",children:"Estuary account"})]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.a,{href:"/guides/get-started-with-flowctl",children:"flowctl installed locally"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"identify-the-draft-and-pull-it-locally",children:"Identify the draft and pull it locally"}),"\n",(0,l.jsx)(t.p,{children:"Drafts aren't currently visible in the Flow web app, but you can get a list with flowctl."}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Authorize flowctl."}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.a,{href:"/guides/how_to_generate_refresh_token",children:"Generate an Estuary Flow refresh token"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["Run ",(0,l.jsx)(t.code,{children:"flowctl auth token --token <paste-token-here>"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["Run ",(0,l.jsx)(t.code,{children:"flowctl draft list"})]}),"\n",(0,l.jsx)(t.p,{children:"flowctl outputs a table of all the drafts to which you have access, from oldest to newest."}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Use the name and timestamp to find the draft you're looking for."}),"\n",(0,l.jsxs)(t.p,{children:["Each draft has an ",(0,l.jsx)(t.strong,{children:"ID"}),", and most have a name in the ",(0,l.jsx)(t.strong,{children:"Details"})," column. Note the ",(0,l.jsx)(t.strong,{children:"# of Specs"})," column.\nFor drafts created in the web app, materialization drafts will always contain one specification.\nA number higher than 1 indicates a capture with its associated collections."]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Copy the draft ID."}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["Select the draft: ",(0,l.jsx)(t.code,{children:"flowctl draft select --id <paste-id-here>"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["Pull the draft source files to your working directory: ",(0,l.jsx)(t.code,{children:"flowctl draft develop"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Browse the source files."}),"\n",(0,l.jsxs)(t.p,{children:["The source files and their directory structure will look slightly different depending on the draft.\nRegardless, there will always be a top-level file called ",(0,l.jsx)(t.code,{children:"flow.yaml"})," that ",(0,l.jsx)(t.em,{children:"imports"})," all other YAML files,\nwhich you'll find in a subdirectory named for your catalog prefix.\nThese, in turn, contain the specifications you'll want to edit."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"edit-the-draft-and-publish",children:"Edit the draft and publish"}),"\n",(0,l.jsx)(t.p,{children:"Next, you'll make changes to the specification(s), test, and publish the draft."}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Open the YAML files that contain the specification you want to edit."}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Make changes. For guidance on how to construct Flow specifications, see the documentation for the entity type:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"/concepts/captures#specification",children:"Captures"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"/concepts/collections#specification",children:"Collections"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"/concepts/materialization#specification",children:"Materializations"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["When you're done, sync the local work to the global draft: ",(0,l.jsx)(t.code,{children:"flowctl draft author --source flow.yaml"}),"."]}),"\n",(0,l.jsxs)(t.p,{children:["Specifying the top-level ",(0,l.jsx)(t.code,{children:"flow.yaml"})," file as the source ensures that all entities in the draft are imported."]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["Publish the draft: ",(0,l.jsx)(t.code,{children:"flowctl draft publish"})]}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Once this operation completes successfully, check to verify if the entity or entities are live. You can:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsx)(t.p,{children:"Go to the appropriate tab in the Flow web app."}),"\n"]}),"\n",(0,l.jsxs)(t.li,{children:["\n",(0,l.jsxs)(t.p,{children:["Run ",(0,l.jsx)(t.code,{children:"flowctl catalog list"}),", filtering by ",(0,l.jsx)(t.code,{children:"--name"}),", ",(0,l.jsx)(t.code,{children:"--prefix"}),", or entity type, for example ",(0,l.jsx)(t.code,{children:"--capture"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"If you're not satisfied with the published entities, you can continue to edit them.\nSee the other guides for help:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"/guides/edit-data-flows",children:"Edit in the web app"}),"."]}),"\n",(0,l.jsxs)(t.li,{children:[(0,l.jsx)(t.a,{href:"/guides/flowctl/edit-specification-locally",children:"Edit with flowctl"}),"."]}),"\n"]})]})}function f(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);