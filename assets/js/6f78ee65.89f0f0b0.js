"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[3295],{28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var s=n(96540);const i={},r=s.createContext(i);function l(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}},81078:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"reference/deletions","title":"Handling Deletions in Estuary Flow","description":"Estuary supports two categories of deletions: soft deletes and hard deletes. These deletion types determine how documents are marked and treated within the system. Below is an explanation of each category.","source":"@site/docs/reference/deletions.md","sourceDirName":"reference","slug":"/reference/deletions","permalink":"/reference/deletions","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/reference/deletions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Backfilling Data","permalink":"/reference/backfilling-data"},"next":{"title":"Materialization sync schedule","permalink":"/reference/materialization-sync-schedule"}}');var i=n(74848),r=n(28453);const l={},o="Handling Deletions in Estuary Flow",d={},a=[{value:"Soft Deletes",id:"soft-deletes",level:2},{value:"Hard Deletes",id:"hard-deletes",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"handling-deletions-in-estuary-flow",children:"Handling Deletions in Estuary Flow"})}),"\n",(0,i.jsxs)(t.p,{children:["Estuary supports two categories of deletions: ",(0,i.jsx)(t.strong,{children:"soft deletes"})," and ",(0,i.jsx)(t.strong,{children:"hard deletes"}),". These deletion types determine how documents are marked and treated within the system. Below is an explanation of each category."]}),"\n",(0,i.jsx)(t.h2,{id:"soft-deletes",children:"Soft Deletes"}),"\n",(0,i.jsx)(t.p,{children:"Soft deletes occur when a document is marked as deleted but is not physically removed from the destination. Instead, it is flagged for deletion with a specific metadata field."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Flagging Soft Deletes"}),": The field ",(0,i.jsx)(t.code,{children:"_meta/op"})," is set to ",(0,i.jsx)(t.code,{children:"'d'"})," to indicate that a document has been marked for deletion."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Document Retention"}),": The document remains in the destination even though it is marked as deleted."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Filtering Soft Deleted Documents"}),": To exclude soft-deleted documents from queries, you can filter out documents where ",(0,i.jsx)(t.code,{children:"_meta/op = 'd'"}),". This ensures that soft-deleted documents are ignored without permanently removing them."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"hard-deletes",children:"Hard Deletes"}),"\n",(0,i.jsx)(t.p,{children:"Hard deletes go a step further than soft deletes by permanently removing documents from the destination."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Flagging Hard Deletes"}),": Similar to soft deletes, the ",(0,i.jsx)(t.code,{children:"_meta/op"})," field is set to ",(0,i.jsx)(t.code,{children:"'d'"})," for documents that need to be deleted."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Document Removal"}),": Once a document is flagged, a query is issued to physically remove any document marked with ",(0,i.jsx)(t.code,{children:"_meta/op = 'd'"})," from the destination."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Supported Materialization Connectors for Hard Deletes"}),":","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Snowflake"}),"\n",(0,i.jsx)(t.li,{children:"Google BigQuery"}),"\n",(0,i.jsx)(t.li,{children:"Databricks"}),"\n",(0,i.jsx)(t.li,{children:"Amazon Redshift"}),"\n",(0,i.jsx)(t.li,{children:"Elastic"}),"\n",(0,i.jsx)(t.li,{children:"PostgreSQL"}),"\n",(0,i.jsx)(t.li,{children:"MySQL"}),"\n",(0,i.jsx)(t.li,{children:"SQL Server"}),"\n",(0,i.jsx)(t.li,{children:"AlloyDB"}),"\n",(0,i.jsx)(t.li,{children:"MongoDB"}),"\n",(0,i.jsx)(t.li,{children:"MotherDuck"}),"\n",(0,i.jsx)(t.li,{children:"TimescaleDB"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);