"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[44],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var o=n(96540);const r={},i=o.createContext(r);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:t},e.children)}},37932:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"guides/howto_join_two_collections_typescript","title":"How to join two collections (TypeScript)","description":"This guide will teach you how to write and publish a TypeScript derivation, which will join two collections together on a common key.","source":"@site/docs/guides/howto_join_two_collections_typescript.md","sourceDirName":"guides","slug":"/guides/howto_join_two_collections_typescript","permalink":"/guides/howto_join_two_collections_typescript","draft":false,"unlisted":false,"editUrl":"https://github.com/estuary/flow/edit/master/site/docs/guides/howto_join_two_collections_typescript.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"How to generate an Estuary Flow Refresh Token","permalink":"/guides/how_to_generate_refresh_token"},"next":{"title":"Schema evolution","permalink":"/guides/schema-evolution"}}');var r=n(74848),i=n(28453);const s={},l="How to join two collections (TypeScript)",a={},c=[{value:"Introduction<a></a>",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Setting up your development environment<a></a>",id:"setting-up-your-development-environment",level:2},{value:"Writing the derivation<a></a>",id:"writing-the-derivation",level:2},{value:"Wrapping up<a></a>",id:"wrapping-up",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"how-to-join-two-collections-typescript",children:"How to join two collections (TypeScript)"})}),"\n",(0,r.jsx)(t.p,{children:"This guide will teach you how to write and publish a TypeScript derivation, which will join two collections together on a common key."}),"\n",(0,r.jsxs)(t.h2,{id:"introduction",children:["Introduction",(0,r.jsx)("a",{id:"introduction"})]}),"\n",(0,r.jsx)(t.p,{children:"This tutorial will show you how to implement a stateless transformation using TypeScript. You\u2019ll learn how to implement a flow that matches orders to customers in real-time."}),"\n",(0,r.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["An ",(0,r.jsx)(t.a,{href:"https://dashboard.estuary.dev/register",children:"Estuary"})," account"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"flowctl"})," ",(0,r.jsx)(t.a,{href:"/concepts/flowctl#installation-and-setup",children:"installed"})," and ",(0,r.jsx)(t.a,{href:"/reference/authentication#authenticating-flow-using-the-cli",children:"authenticated"})]}),"\n",(0,r.jsx)(t.li,{children:"A Google Drive account to work with Google Sheets"}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://www.docker.com/",children:"Docker"})}),"\n"]}),"\n",(0,r.jsxs)(t.h2,{id:"setting-up-your-development-environment",children:["Setting up your development environment",(0,r.jsx)("a",{id:"setting-up-your-development-environment"})]}),"\n",(0,r.jsxs)(t.p,{children:["Example datasets for this tutorial are available in two Google Sheets: this one for ",(0,r.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1glzIgMIeS5Fd2unb-m9J6czXdWBXK_x_ZsgzxbVUclQ/edit#gid=0",children:"orders"})," and this one for ",(0,r.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1WUyM9hmRwa8B1Kz2buFcscZegPA35nvTdaHC-L3xr7U/edit#gid=0",children:"customers"}),". Make a copy of each to your own Drive so you\u2019ll be able to test out the pipeline by adding, editing or removing records."]}),"\n",(0,r.jsxs)(t.admonition,{type:"tip",children:[(0,r.jsx)(t.p,{children:"Ensure that the first row in your copied sheets is frozen. Otherwise, Flow will not pick up the headers as field names and instead assign field names in high-case alphabet order (A, B, C...)."}),(0,r.jsxs)(t.p,{children:["If the field names in your collection schema are not correct, the ",(0,r.jsx)(t.code,{children:"flowctl generate"})," command later in the tutorial will fail with the error: ",(0,r.jsx)(t.code,{children:"/customer_id is prohibited from ever existing by the schema"}),"."]})]}),"\n",(0,r.jsx)(t.p,{children:"Customers table sample"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"customer_id"}),(0,r.jsx)(t.th,{children:"email"}),(0,r.jsx)(t.th,{children:"name"}),(0,r.jsx)(t.th,{children:"phone"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"101"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"mailto:customer1@email.com",children:"customer1@email.com"})}),(0,r.jsx)(t.td,{children:"John Doe"}),(0,r.jsx)(t.td,{children:"123-456-7890"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"102"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"mailto:customer2@email.com",children:"customer2@email.com"})}),(0,r.jsx)(t.td,{children:"Jane Smith"}),(0,r.jsx)(t.td,{children:"987-654-3210"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"103"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"mailto:customer3@email.com",children:"customer3@email.com"})}),(0,r.jsx)(t.td,{children:"Alex Lee"}),(0,r.jsx)(t.td,{children:"555-123-4567"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"Orders table sample"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"order_id"}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"customer_id"}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"order_date"}),(0,r.jsx)(t.th,{style:{textAlign:"right"},children:"total_amount"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"1"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"101"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"2024-05-10 8:00:00"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"50"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"2"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"102"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"2024-05-09 12:00:00"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"75.5"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"3"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"103"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"2024-05-08 15:30:00"}),(0,r.jsx)(t.td,{style:{textAlign:"right"},children:"100.25"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["As you can see, both tables contain a field called ",(0,r.jsx)(t.code,{children:"customer_id"}),". This is what we\u2019re going to use as the key in our join operation. One customer can have multiple orders, but one order can only belong to one customer. There are also some customers without any orders."]}),"\n",(0,r.jsx)(t.p,{children:"Let\u2019s say you want to see all customers and all of their orders in the results. This means you\u2019ll want to implement a full outer join."}),"\n",(0,r.jsxs)(t.p,{children:["To create the collections in Estuary Flow, head over to the dashboard and ",(0,r.jsx)(t.a,{href:"https://dashboard.estuary.dev/captures/create",children:"create"})," a new ",(0,r.jsx)(t.a,{href:"/reference/Connectors/capture-connectors/google-sheets",children:"Google Sheet capture"}),". Give it a name and add one of the previously copied sheet\u2019s URLs as the \u201cSpreadsheet Link\u201d. Authenticate your Google account and Save and Publish the capture. Repeat this process for the other sheet, which should leave you with 2 collections."]}),"\n",(0,r.jsx)(t.p,{children:"You can take a look into each via the data preview window on the Collections page to verify that the sample data has already landed in Flow."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//orders_sheet_collection_b99f3c9c84/orders_sheet_collection_b99f3c9c84.png",alt:"Orders collection"})}),"\n",(0,r.jsxs)(t.p,{children:["In order to implement transformations through ",(0,r.jsx)(t.a,{href:"https://docs.estuary.dev/concepts/#derivations",children:"derivations"}),", you\u2019ll need to set up your development environment. You\u2019ll need a text editor and ",(0,r.jsx)(t.a,{href:"https://docs.estuary.dev/concepts/flowctl/",children:"flowctl"}),", the CLI-tool for Flow, installed on your machine."]}),"\n",(0,r.jsxs)(t.p,{children:["To verify that you\u2019re able to access Flow via ",(0,r.jsx)(t.code,{children:"flowctl"}),", try executing the ",(0,r.jsx)(t.code,{children:"flowctl catalog list"})," command."]}),"\n",(0,r.jsx)(t.p,{children:"If you see your new Google Sheets captures and their associated collections, you\u2019re good to continue!"}),"\n",(0,r.jsxs)(t.h2,{id:"writing-the-derivation",children:["Writing the derivation",(0,r.jsx)("a",{id:"writing-the-derivation"})]}),"\n",(0,r.jsx)(t.p,{children:"Set up your folder structure to organize the resources required for the derivation:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Create a new working directory."}),"\n",(0,r.jsxs)(t.li,{children:["Inside, create a ",(0,r.jsx)(t.code,{children:"flow.yaml"})," file."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["Inside your ",(0,r.jsx)(t.code,{children:"flow.yaml"})," file, add the following contents, making sure to update the collection names accordingly:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"collections:\n\n  <your-tenant>/<your-prefix>/customers_with_orders:\n    schema:\n      description: >-\n        A document that represents the joined result of orders with customer\n        information\n      type: object\n      properties:\n        customer_id:\n          type: string\n        email:\n          type: string\n        name:\n          type: string\n        phone:\n          type: string\n        orders:\n          type: array\n          items:\n            type: object\n            properties:\n              order_id:\n                type: string\n          reduce:\n            strategy: merge\n            key:\n              - /order_id\n      required:\n        - customer_id\n      reduce:\n        strategy: merge\n    key:\n      - /customer_id\n\n    derive:\n      using:\n        typescript:\n          module: full-outer-join.flow.ts\n      transforms:\n        - name: fromOrders\n          source:\n            name: <your-tenant>/<your-orders-collection/Sheet1\n          shuffle:\n            key:\n              - /customer_id\n        - name: fromCustomers\n          source:\n            name: <your-tenant>/<your-customers-collection>/Sheet1\n          shuffle:\n            key:\n              - /customer_id\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Let\u2019s take a look at this in a bit more detail. Essentially, we define one collection which is a ",(0,r.jsx)(t.code,{children:"derivation"})," that is the result of two transformations."]}),"\n",(0,r.jsx)(t.p,{children:"In the schema definition, we specify what structure we want the documents of the result collection to take on."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"  <your-tenant>/<your-prefix>/customers_with_orders:\n    schema:\n      description: >-\n        A document that represents the joined result of orders with customer\n        information\n      type: object\n      properties:\n        customer_id:\n          type: string\n        email:\n          type: string\n        name:\n          type: string\n        phone:\n          type: string\n        orders:\n          type: array\n          items:\n            type: object\n            properties:\n              order_id:\n                type: string\n          reduce:\n            strategy: merge\n            key:\n              - /order_id\n      required:\n        - customer_id\n      reduce:\n        strategy: merge\n    key:\n      - /customer_id\n"})}),"\n",(0,r.jsx)(t.p,{children:"Because you are going to implement a 1-to-many join using the two source collections, it\u2019s important to pay attention to what reduction strategy Flow uses."}),"\n",(0,r.jsxs)(t.p,{children:["There are two ",(0,r.jsx)(t.code,{children:"merge"})," strategies defined here, one for the ",(0,r.jsx)(t.code,{children:"customers_with_orders"})," collection and for the nested ",(0,r.jsx)(t.code,{children:"orders"})," array."]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsx)(t.p,{children:"Merge reduces the left-hand side and right-hand side by recursively reducing shared document locations. The LHS and RHS must either both be objects, or both be arrays."})}),"\n",(0,r.jsxs)(t.p,{children:["For the nested merge, you have to define a key, which is one or more JSON pointers that are relative to the reduced location. If both sides are arrays and a merge key is present, then a deep sorted merge of the respective items is done, as ordered by the key. In this case, setting it to ",(0,r.jsx)(t.code,{children:"order_id"})," will cause the reduction to collect all orders for a given customer."]}),"\n",(0,r.jsx)(t.p,{children:"The derivation details are defined in the next section of the yaml:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"    derive:\n      using:\n        typescript:\n          module: full-outer-join.flow.ts\n      transforms:\n        - name: fromOrders\n          source:\n            name: <your-tenant>/<your-orders-collection>/Sheet1\n          shuffle:\n            key:\n              - /customer_id\n        - name: fromCustomers\n          source:\n            name: <your-tenant>/<your-customers-collection>/Sheet1\n          shuffle:\n            key:\n              - /customer_id\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This tells Flow that the transformation code is defined in a TypeScript file called ",(0,r.jsx)(t.code,{children:"full-outer-join.flow.ts"})," (which doesn\u2019t exist \u2013 yet!) and that there are in fact two transformations that it expects, one for each source collection."]}),"\n",(0,r.jsx)(t.p,{children:"Shuffles let Flow identify the shard that should process a particular source document, in order to co-locate that processing with other documents it may need to know about."}),"\n",(0,r.jsx)(t.p,{children:"Both transformations shuffle data on the same key. An important detail is that if a derivation has more than one transformation, the shuffle keys of all transformations must align with one another in terms of the extracted key types (string vs integer) as well as the number of components in a composite key."}),"\n",(0,r.jsxs)(t.p,{children:["Let\u2019s generate the scaffolding for the derivation using ",(0,r.jsx)(t.code,{children:"flowctl"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"flowctl generate --source flow.yaml\n"})}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsxs)(t.p,{children:["Is your Docker daemon running? Some ",(0,r.jsx)(t.code,{children:"flowctl"})," commands, like ",(0,r.jsx)(t.code,{children:"flowctl generate"}),", use a Docker container to help with more involved processes, like creating stub files. You don't need to set up a Docker container yourself for the command to work, but the Docker daemon should be running."]})}),"\n",(0,r.jsx)(t.p,{children:"This command will create a few new files in your current working directory."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"\u279c  tree\n.\n\u251c\u2500\u2500 deno.json\n\u251c\u2500\u2500 flow.yaml\n\u251c\u2500\u2500 flow_generated\n\u2502   \u2514\u2500\u2500 typescript\n\u2502       \u2514\u2500\u2500 Dani\n\u2502           \u2514\u2500\u2500 join-tutorial-typescript\n\u2502               \u2514\u2500\u2500 customers_with_orders.ts\n\u2514\u2500\u2500 full-outer-join.flow.ts\n\n5 directories, 4 files\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You won't need to modify the ",(0,r.jsx)(t.code,{children:"flow_generated"})," folder or the ",(0,r.jsx)(t.code,{children:"deno.json"})," file in this tutorial. If you take a look at the file that ",(0,r.jsx)(t.code,{children:"flowctl"})," generated under ",(0,r.jsx)(t.code,{children:"flow_generated/typescript/<your_tenant>/<your_prefix>/customers_with_orders.ts"})," you can see the types you are able to use in your transformations."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:"// Generated for published documents of derived collection customers_with_orders.\nexport type Document = /* A document that represents the joined result of orders with customer information */ {\n    customer_id: string;\n    email?: string;\n    name?: string;\n    orders?: unknown[];\n    phone?: string;\n};\n\n// Generated for read documents of sourced collection Sheet1.\nexport type SourceFromOrders = {\n    customer_id?: string;\n    order_date?: string;\n    order_id?: string;\n    row_id: number;\n    total_amount?: string;\n};\n\n// Generated for read documents of sourced collection Sheet1.\nexport type SourceFromCustomers = {\n    customer_id?: string;\n    email?: string;\n    name?: string;\n    phone?: string;\n    row_id: number;\n};\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Now, the actual transformation code will live in the following file: ",(0,r.jsx)(t.code,{children:"full-outer-join.flow.ts"}),". Take a look at its contents."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'import { IDerivation, Document, SourceFromOrders, SourceFromCustomers } from \'flow/Dani/join-tutorial-typescript/customers_with_orders.ts\';\n\n// Implementation for derivation Dani/join-tutorial-typescript/customers_with_orders.\nexport class Derivation extends IDerivation {\n    fromOrders(_read: { doc: SourceFromOrders }): Document[] {\n      throw new Error("Not implemented");\n    }\n    fromCustomers(_read: { doc: SourceFromCustomers }): Document[] {\n      throw new Error("Not implemented");\n  }\n}\n'})}),"\n",(0,r.jsxs)(t.p,{children:["Helpfully, ",(0,r.jsx)(t.code,{children:"flowctl"})," provides two skeleton functions. Update the function body to implement the filter functionality. Modify the Derivation class like this:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-typescript",children:'import { IDerivation, Document, SourceFromOrders, SourceFromCustomers } from \'flow/Dani/join-tutorial-typescript/customers_with_orders.ts\';\n\n// Implementation for derivation Dani/join-tutorial-typescript/customers_with_orders.\nexport class Derivation extends IDerivation {\n    fromOrders(_read: { doc: SourceFromOrders }): Document[] {\n      return [{\n        customer_id: _read.doc.customer_id || "",\n        orders: [_read.doc],\n      }];\n    }\n    fromCustomers(_read: { doc: SourceFromCustomers }): Document[] {\n      return [{\n        customer_id: _read.doc.customer_id || "",\n        email: _read.doc.email,\n        name: _read.doc.name,\n        phone: _read.doc.phone\n      }];\n  }\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"As you can see here, all we do is return the fields we need from each document. There\u2019s no code required to define the actual \u201cjoin\u201d \u2013 all the heavy lifting is done in the reduction phase during materialization by the Flow runtime based on the schema you defined earlier."}),"\n",(0,r.jsxs)(t.p,{children:["Publish the derivation using ",(0,r.jsx)(t.code,{children:"flowctl"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"flowctl catalog publish --source flow.yaml\n"})}),"\n",(0,r.jsx)(t.p,{children:"After it\u2019s successfully published, head over to the Flow dashboard to see the new collection."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//customers_with_orders_collection_d3c09d237f/customers_with_orders_collection_d3c09d237f.png",alt:"Customers with Orders collection"})}),"\n",(0,r.jsx)(t.p,{children:"If you take a look at the preview window at the bottom of the page, you might notice that the documents are not yet in their final, reduced form. As mentioned earlier, the reduction happens during materialization. Let's create one to show the results!"}),"\n",(0,r.jsxs)(t.p,{children:["Head over to the ",(0,r.jsx)(t.a,{href:"https://dashboard.estuary.dev/materializations/create",children:"materialization creation page"}),", search for ",(0,r.jsx)(t.a,{href:"/reference/Connectors/materialization-connectors/Google-sheets",children:"Google Sheets"})," and configure a new connector. Create a fresh Google Sheet and copy its URL as the Spreadsheet Link."]}),"\n",(0,r.jsx)(t.p,{children:"In the third configuration step, select the derivation you created as the source collection."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//source_collection_capture_e3946cd3a0/source_collection_capture_e3946cd3a0.png",alt:"Link source collection to materialization"})}),"\n",(0,r.jsx)(t.p,{children:'Refresh "Field Selection" to populate the list of available fields from the collection schema. Make sure all your desired fields are selected, including the orders array.'}),"\n",(0,r.jsx)(t.p,{children:"After everything looks good, press the \u201cSave and Publish\u201d button in the top-right corner to provision your materialization connector."}),"\n",(0,r.jsx)(t.p,{children:"And that\u2019s it! Go check out the sheet you created to store the results. You should see all orders associated with their respective customer in the nested array."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{src:"https://storage.googleapis.com/estuary-marketing-strapi-uploads/uploads//results_8c3a566b86/results_8c3a566b86.png",alt:"Reduced results in a Google Sheet"})}),"\n",(0,r.jsx)(t.p,{children:"To test the data flow, head over to the source \u201cOrders\u201d sheet, and add a new order for a customer. After a few seconds, you should see the new order added to the array of existing orders of the customer. Take a few minutes to play around with different actions as well: deleting an order, adding a customer, or editing details of either entity."}),"\n",(0,r.jsxs)(t.h2,{id:"wrapping-up",children:["Wrapping up",(0,r.jsx)("a",{id:"wrapping-up"})]}),"\n",(0,r.jsx)(t.p,{children:"In this guide you learned how to write a TypeScript derivation to join two collections. After finishing with the tutorial, don\u2019t forget to delete resources you don\u2019t need anymore."}),"\n",(0,r.jsxs)(t.p,{children:["To learn more about joining collections with Estuary Flow, check out ",(0,r.jsx)(t.a,{href:"https://estuary.dev/streaming-joins-are-hard/",children:"Streaming Joins Are Hard"})," and ",(0,r.jsx)(t.a,{href:"https://estuary.dev/derivations-join-collections-sql/",children:"How to Join Two Collections in Estuary Flow using SQL"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);